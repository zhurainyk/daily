!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CVH5Lib=t():e.CVH5Lib=t()}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=92)}([function(e,t){var r=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=r)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=f(r(35)),i=f(r(2)),o=f(r(3)),a=f(r(100)),s=f(r(101)),u=f(r(65)),c=r(7);function f(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t){if((0,i.default)(this,e),(0,u.default)(this),this.config=a.default.deepCopy({ignores:[],el:null,name:(new Date).getTime()+"-"+parseInt(1e3*Math.random()),render_type:"MSE",reconnect:!1,debug:t.debug},t),this.logParams={},this.rootElement=a.default.findDom(document,"#"+this.config.id),!this.rootElement){var r=this.config.el;r&&1===r.nodeType?this.rootElement=r:e.LOG.WARN("[CVH5LivePlayer]","rootElement is not set ,You must attach it later!")}this.pluginsCall(),this.rootElement&&this.attach(this.rootElement)}return(0,o.default)(e,[{key:"Attach",value:function(e){this.attach(e)}},{key:"attach",value:function(t){this.emit("decoder_attach",null),this.emit("smartdecoder_attach",null),this.rootElement=t,this.rootElement.innerHTML="";var r=document.createDocumentFragment(),n=(0,c.create_domnode_with_css)("div",this.config.name,"\n             position:relative;\n             width:100%;\n             height:100%;\n            "),i=(0,c.create_domnode_with_css)("canvas","mask-"+this.config.name,"\n             width:100%;\n             height:100%;\n\n             position:absolute;\n             left:0;\n             top:0;\n             right:0;\n             bottom:0;\n\n             z-index: 999;\n         "),o=(0,c.create_domnode_with_css)("div","rendertarget-"+this.config.name,"");n.appendChild(o),n.appendChild(i),this.config.debug&&this.emit("infopanel_atatch",n),r.appendChild(n),r?(t.appendChild(r),this.mask_canvas=i,this.emit("decoder_attach",t),this.emit("smartdecoder_attach",i)):e.LOG.ERROR("[liveplayer]","_createRenderTarget failed!")}},{key:"play",value:function(e){e?(this.logParams.cinfo=e,this.emit("open_request",e)):this.emit("invalid_client_info")}},{key:"stop",value:function(){this.emit("abort_request"),this.emit("player_stream_closed",this.config.logParams)}},{key:"capture",value:function(){}},{key:"resize",value:function(){}},{key:"SwitchAudio",value:function(){if(this.get_volumne&&this.set_volumne)if(0==arguments.length){var t=this.get_volumne()-0<=1e-6;t?this.set_volumne(1):this.set_volumne(0)}else 1==arguments.length&&this.set_volumne(arguments[0]);else e.LOG.ERROR("未实现CVPlayer.get_volumne or CVPlayer.set_volumne")}},{key:"destroy",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.mask_canvas=null,this.emit("destroy",{isDelDom:e})}},{key:"pluginsCall",value:function(){var t=this;if(e.plugins){var r=this.config.ignores;(0,n.default)(e.plugins).forEach((function(n){var i=e.plugins[n],o=i.autorun,a=i.dependencies;if(!r.some((function(e){return n===e}))){var s=[];if(a.forEach((function(t){var r=e.plugins[t].loadStatus;s.push(r)})),0!=s.length&&!s.every((function(e){return e})))return;o.call(t,t),e.plugins[n].loadStatus=!0}}))}}},{key:"volumne",get:function(){return this.get_volumne?this.get_volumne():e.LOG.ERROR("未实现CVPlayer.get_volumne")},set:function(t){this.set_volumne?this.set_volumne(t):e.LOG.ERROR("未实现CVPlayer.set_volumne")}},{key:"smartconfig",get:function(){return this.get_smartconfig?this.get_smartconfig():e.LOG.ERROR("未实现CVPlayer.get_smartconfig")},set:function(t){this.set_smartconfig?this.set_smartconfig(t):e.LOG.ERROR("未实现CVPlayer.set_smartconfig")}},{key:"enable_smart",get:function(){return this.get_smartconfig?this.get_smartconfig():e.LOG.ERROR("未实现CVPlayer.get_smartconfig")},set:function(t){this.set_smartconfig?this.set_smartconfig(t):e.LOG.ERROR("未实现CVPlayer.set_smartconfig")}},{key:"delay",set:function(t){this.set_delay?this.set_delay(t):e.LOG.ERROR("未实现CVPlayer.set_delay")}}],[{key:"install",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e.plugins||(e.plugins={}),e.plugins[t]={autorun:r,loadStatus:!1,dependencies:n}}}]),e}();l.sniffer=s.default,l.util=a.default,l.LOG={DEBUG:function(){"console"in window&&console.log.apply(console,arguments)},WARN:function(){"console"in window&&console.warn.apply(console,arguments)},ERROR:function(){"console"in window&&console.error.apply(console,arguments)}},t.default=l,e.exports=t.default},function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,r){"use strict";t.__esModule=!0;var n,i=r(97),o=(n=i)&&n.__esModule?n:{default:n};t.default=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,o.default)(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t,r){var n=r(4),i=r(0),o=r(12),a=r(13),s=r(15),u=function(e,t,r){var c,f,l,d=e&u.F,h=e&u.G,_=e&u.S,v=e&u.P,p=e&u.B,m=e&u.W,y=h?i:i[t]||(i[t]={}),g=y.prototype,w=h?n:_?n[t]:(n[t]||{}).prototype;for(c in h&&(r=t),r)(f=!d&&w&&void 0!==w[c])&&s(y,c)||(l=f?w[c]:r[c],y[c]=h&&"function"!=typeof w[c]?r[c]:p&&f?o(l,n):m&&w[c]==l?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(l):v&&"function"==typeof l?o(Function.call,l):l,v&&((y.virtual||(y.virtual={}))[c]=l,e&u.R&&g&&!g[c]&&a(g,c,l)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,r){var n=r(41)("wks"),i=r(30),o=r(4).Symbol,a="function"==typeof o;(e.exports=function(e){return n[e]||(n[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TestAvr=t.is_validkey=t.is_function=t.is_object=void 0;var n=f(r(2)),i=f(r(3)),o=f(r(24)),a=f(r(47));t.SupportWebWorker=function(){return void 0!==("undefined"==typeof Worker?"undefined":(0,a.default)(Worker))},t.SupportWebSocket=function(){return"undefined"!=typeof WebSocket||!!window.WebSocket&&window.WebSocket.prototype.send},t.parse_frameheader=function(e){var t=new DataView(e,0,36),r=4,n=t.getUint32(r,!0);r=8;var i=t.getUint32(r,!0);r=12;var o=t.getUint32(r,!0);r=16;var a=t.getUint32(r,!0);r=32;var s=t.getUint32(r,!0),u=(h=n,l(h)||function(e){return 28==e||29==e}(h)),c=1==n||161==n||18==n||162==n||24==n||168==n,f=9==n||19==n||25==n,d=8==n;var h;if(c||f){r=24;var _=t.getUint16(r,!0);r+=2;var v=t.getUint16(r,!0);r+=2;var p=t.getUint8(r,!0);return{type:"video",frameNo:i,frameTime:o,frameTimeTickCount:a,frameTimestamp:s,frameType:n,is_key_frame:c,video:{vw:_,vh:v,codecId:p}}}if(d){r=24;var m=t.getUint8(r,!0);r+=1;var y=t.getUint8(r,!0);r+=1;var g=t.getUint8(r,!0);r+=1;var w=t.getUint8(r,!0);return{type:"audio",frameNo:i,frameTime:o,frameTimeTickCount:a,frameTimestamp:s,frameType:n,is_audio_frame:d,audio:{codecId:m,samplerate:y,channel:w,bitrate:g}}}if(u){r=24;var b=t.getUint32(r,!0);return{type:"smart",frameNo:i,frameTime:o,frameTimeTickCount:a,frameTimestamp:s,frameType:n,is_smart_i:l(n),smart:{ivs_node_num:b}}}return{type:"none",frameNo:i,frameTime:o,frameType:n}},t.create_domnode_with_css=function(e,t,r){var n=document.createElement(e);return n.style.cssText=r,n.setAttribute("id",""+t),n},t.is_string=d,t.is_boolean=function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},t.is_number=function(e){return"[object Number]"===Object.prototype.toString.call(e)},t.replace_node_with_prefix=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"node",n=!1;if(t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement){var i=h(e,r);if(i){var o=i.parentNode;o&&(o.replaceChild(t,i),n=!0)}else c.default.LOG.ERROR("error: rootElement:"+e+" has no prefix:["+r+"] node yet!")}else c.default.LOG.ERROR("replace_videonode error: invalid video Element:"+t);return n},t.debounce=function(){return s.default.apply?s.default.apply(this,arguments):(0,s.default)(Array.prototype.slice.apply(arguments))},t.throttle=function(){return u.default.apply?u.default.apply(this,arguments):(0,u.default)(Array.prototype.slice.apply(arguments))},t.safe_setproperty=function(e,t,r){if(e.hasOwnProperty(t))return console&&console.error&&console.error(e,"already has property[",t,"],ignore this setproperty request!"),!1;e[t]=r;return!0},t.EventDisposer=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e.addEventListener(t,r,n),function(){e.removeEventListener(t,r,n)}};var s=f(r(75)),u=f(r(78)),c=f(r(1));function f(e){return e&&e.__esModule?e:{default:e}}function l(e){return 27==e}function d(e){return"[object String]"===Object.prototype.toString.call(e)}t.is_object=function(e){return"function"==typeof e||"object"===(void 0===e?"undefined":(0,a.default)(e))&&null!==e&&!Array.isArray(e)},t.is_function=function(e){return function(e){return e&&"function"==typeof e}},t.is_validkey=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function h(e,t){if(e.children&&e.children.length>0){var r=null,n=!0,i=!1,a=void 0;try{for(var s,u=(0,o.default)(e.children);!(n=(s=u.next()).done);n=!0){if(r=h(s.value,t))return r}}catch(e){i=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}}else{var f=e.getAttribute("name")||e.getAttribute("id");if(c.default.LOG.WARN(f),d(f)&&f.startsWith(t))return e}}t.TestAvr=function(){function e(t){(0,n.default)(this,e);var r=t=t||{},i=r.max_length,o=r.max_value,a=r.min_value;this.options={max_length:i||50,max_value:o||0,min_value:a||0},this.last_st=0,this.framecnt=0,this.value_vec=[].fill(0,0,this.options.max_length),this.value_cursor_idx=0,this.min=a,this.max=o}return(0,i.default)(e,[{key:"reset",value:function(){this.last_st=0,this.value_cursor_idx=0,this.value_vec=[].fill(0,0,this.options.max_length),this.min=this.options.min_value,this.max=this.options.max_value}},{key:"test_fps",value:function(){0==this.last_st?this.last_st=performance.now():this.framecnt++}},{key:"test_value",value:function(e){e>this.max?this.max=e:e<this.min&&(this.min=e),this.value_vec[this.value_cursor_idx++]=e,this.value_cursor_idx==this.value_vec.length&&(this.value_cursor_idx=0)}},{key:"get_avrfps",value:function(){var e=1e3*this.framecnt/(performance.now()-this.last_st);return this.last_st=0,this.framecnt=0,e}},{key:"get_avrvalue",value:function(){var e=this.value_vec.filter((function(e){return e>0})),t=e.reduce((function(e,t){return e+t}),0);return e.length?t/e.length:0}}]),e}()},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){e.exports=!r(16)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,r){var n=r(11),i=r(64),o=r(44),a=Object.defineProperty;t.f=r(9)?Object.defineProperty:function(e,t,r){if(n(e),t=o(t,!0),n(r),i)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){var n=r(8);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t,r){var n=r(23);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,r){var n=r(10),i=r(31);e.exports=r(9)?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){e.exports={default:r(150),__esModule:!0}},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,r){var n=r(36);e.exports=function(e){return Object(n(e))}},function(e,t,r){var n=r(37),i=r(36);e.exports=function(e){return n(i(e))}},function(e,t){e.exports={}},function(e,t,r){var n=r(62),i=r(42);e.exports=Object.keys||function(e){return n(e,i)}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t){e.exports=!0},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,r){e.exports={default:r(120),__esModule:!0}},function(e,t,r){r(121);for(var n=r(4),i=r(13),o=r(19),a=r(6)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var c=s[u],f=n[c],l=f&&f.prototype;l&&!l[a]&&i(l,a,c),o[c]=o.Array}},function(e,t,r){var n=r(10).f,i=r(15),o=r(6)("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},function(e,t,r){"use strict";var n=r(125)(!0);r(46)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})}))},function(e,t,r){e.exports={default:r(146),__esModule:!0}},function(e,t,r){var n=r(12),i=r(152),o=r(153),a=r(11),s=r(38),u=r(71),c={},f={};(t=e.exports=function(e,t,r,l,d){var h,_,v,p,m=d?function(){return e}:u(e),y=n(r,l,t?2:1),g=0;if("function"!=typeof m)throw TypeError(e+" is not iterable!");if(o(m)){for(h=s(e.length);h>g;g++)if((p=t?y(a(_=e[g])[0],_[1]):y(e[g]))===c||p===f)return p}else for(v=m.call(e);!(_=v.next()).done;)if((p=i(v,y,_.value,t))===c||p===f)return p}).BREAK=c,t.RETURN=f},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,r){var n=r(11),i=r(124),o=r(42),a=r(40)("IE_PROTO"),s=function(){},u=function(){var e,t=r(43)("iframe"),n=o.length;for(t.style.display="none",r(69).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;n--;)delete u.prototype[o[n]];return u()};e.exports=Object.create||function(e,t){var r;return null!==e?(s.prototype=n(e),r=new s,s.prototype=null,r[a]=e):r=u(),void 0===t?r:i(r,t)}},function(e,t,r){var n=r(21),i=r(6)("toStringTag"),o="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,r,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?r:o?n(t):"Object"==(a=n(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,r){e.exports={default:r(93),__esModule:!0}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,r){var n=r(21);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t,r){var n=r(39),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){var n=r(41)("keys"),i=r(30);e.exports=function(e){return n[e]||(n[e]=i(e))}},function(e,t,r){var n=r(0),i=r(4),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:r(22)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,r){var n=r(8),i=r(4).document,o=n(i)&&n(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,r){var n=r(8);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,r){"use strict";var n=r(113)();e.exports=function(e){return e!==n&&null!==e}},function(e,t,r){"use strict";var n=r(22),i=r(5),o=r(68),a=r(13),s=r(19),u=r(123),c=r(26),f=r(70),l=r(6)("iterator"),d=!([].keys&&"next"in[].keys()),h=function(){return this};e.exports=function(e,t,r,_,v,p,m){u(r,t,_);var y,g,w,b=function(e){if(!d&&e in O)return O[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},x=t+" Iterator",R="values"==v,E=!1,O=e.prototype,k=O[l]||O["@@iterator"]||v&&O[v],U=k||b(v),S=v?R?b("entries"):U:void 0,A="Array"==t&&O.entries||k;if(A&&(w=f(A.call(new e)))!==Object.prototype&&w.next&&(c(w,x,!0),n||"function"==typeof w[l]||a(w,l,h)),R&&k&&"values"!==k.name&&(E=!0,U=function(){return k.call(this)}),n&&!m||!d&&!E&&O[l]||a(O,l,U),s[t]=U,s[x]=h,v)if(y={values:R?U:b("values"),keys:p?U:b("keys"),entries:S},m)for(g in y)g in O||o(O,g,y[g]);else i(i.P+i.F*(d||E),t,y);return y}},function(e,t,r){"use strict";t.__esModule=!0;var n=a(r(127)),i=a(r(129)),o="function"==typeof i.default&&"symbol"==typeof n.default?function(e){return typeof e}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function a(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof i.default&&"symbol"===o(n.default)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":void 0===e?"undefined":o(e)}},function(e,t,r){t.f=r(6)},function(e,t,r){var n=r(30)("meta"),i=r(8),o=r(15),a=r(10).f,s=0,u=Object.isExtensible||function(){return!0},c=!r(16)((function(){return u(Object.preventExtensions({}))})),f=function(e){a(e,n,{value:{i:"O"+ ++s,w:{}}})},l=e.exports={KEY:n,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,n)){if(!u(e))return"F";if(!t)return"E";f(e)}return e[n].i},getWeak:function(e,t){if(!o(e,n)){if(!u(e))return!0;if(!t)return!1;f(e)}return e[n].w},onFreeze:function(e){return c&&l.NEED&&u(e)&&!o(e,n)&&f(e),e}}},function(e,t,r){var n=r(4),i=r(0),o=r(22),a=r(48),s=r(10).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t){e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},function(e,t,r){"use strict";var n=r(23);function i(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=n(t),this.reject=n(r)}e.exports.f=function(e){return new i(e)}},function(e,t,r){var n=r(13);e.exports=function(e,t,r){for(var i in t)r&&e[i]?e[i]=t[i]:n(e,i,t[i]);return e}},function(e,t,r){"use strict";t.__esModule=!0;var n=o(r(178)),i=o(r(24));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if(Array.isArray(e))return e;if((0,n.default)(Object(e)))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var s,u=(0,i.default)(e);!(n=(s=u.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,t,r){e.exports=r(181)},function(e,t,r){"use strict";t.__esModule=!0;var n,i=r(14),o=(n=i)&&n.__esModule?n:{default:n};t.default=function(e){return function(){var t=e.apply(this,arguments);return new o.default((function(e,r){return function n(i,a){try{var s=t[i](a),u=s.value}catch(e){return void r(e)}if(!s.done)return o.default.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(u)}("next")}))}}},function(e,t,r){e.exports={default:r(183),__esModule:!0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.COLOR={GREEN:"#00FF00",RED:"#FF0000",BLUE:"#0000FF",PURPER:"#0x8B00FF",ORANGE:"0xFF7F00"}},function(e,t,r){var n=r(15),i=r(18),o=r(95)(!1),a=r(40)("IE_PROTO");e.exports=function(e,t){var r,s=i(e),u=0,c=[];for(r in s)r!=a&&n(s,r)&&c.push(r);for(;t.length>u;)n(s,r=t[u++])&&(~o(c,r)||c.push(r));return c}},function(e,t,r){var n=r(5),i=r(0),o=r(16);e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],a={};a[e]=t(r),n(n.S+n.F*o((function(){r(1)})),"Object",a)}},function(e,t,r){e.exports=!r(9)&&!r(16)((function(){return 7!=Object.defineProperty(r(43)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,r){"use strict";var n,i,o,a,s,u,c,f=r(102),l=r(119),d=Function.prototype.apply,h=Function.prototype.call,_=Object.create,v=Object.defineProperty,p=Object.defineProperties,m=Object.prototype.hasOwnProperty,y={configurable:!0,enumerable:!1,writable:!0};i=function(e,t){var r,i;return l(t),i=this,n.call(this,e,r=function(){o.call(i,e,r),d.call(t,this,arguments)}),r.__eeOnceListener__=t,this},s={on:n=function(e,t){var r;return l(t),m.call(this,"__ee__")?r=this.__ee__:(r=y.value=_(null),v(this,"__ee__",y),y.value=null),r[e]?"object"==typeof r[e]?r[e].push(t):r[e]=[r[e],t]:r[e]=t,this},once:i,off:o=function(e,t){var r,n,i,o;if(l(t),!m.call(this,"__ee__"))return this;if(!(r=this.__ee__)[e])return this;if("object"==typeof(n=r[e]))for(o=0;i=n[o];++o)i!==t&&i.__eeOnceListener__!==t||(2===n.length?r[e]=n[o?0:1]:n.splice(o,1));else n!==t&&n.__eeOnceListener__!==t||delete r[e];return this},emit:a=function(e){var t,r,n,i,o;if(m.call(this,"__ee__")&&(i=this.__ee__[e]))if("object"==typeof i){for(r=arguments.length,o=new Array(r-1),t=1;t<r;++t)o[t-1]=arguments[t];for(i=i.slice(),t=0;n=i[t];++t)d.call(n,this,o)}else switch(arguments.length){case 1:h.call(i,this);break;case 2:h.call(i,this,arguments[1]);break;case 3:h.call(i,this,arguments[1],arguments[2]);break;default:for(r=arguments.length,o=new Array(r-1),t=1;t<r;++t)o[t-1]=arguments[t];d.call(i,this,o)}}},u={on:f(n),once:f(i),off:f(o),emit:f(a)},c=p({},u),e.exports=t=function(e){return null==e?_(c):p(Object(e),u)},t.methods=s},function(e,t,r){"use strict";e.exports=function(e){return null!=e}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){e.exports=r(13)},function(e,t,r){var n=r(4).document;e.exports=n&&n.documentElement},function(e,t,r){var n=r(15),i=r(17),o=r(40)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,r){var n=r(33),i=r(6)("iterator"),o=r(19);e.exports=r(0).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[n(e)]}},function(e,t,r){var n=r(21);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,r){var n=r(62),i=r(42).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},function(e,t,r){var n=r(34),i=r(31),o=r(18),a=r(44),s=r(15),u=r(64),c=Object.getOwnPropertyDescriptor;t.f=r(9)?c:function(e,t){if(e=o(e),t=a(t,!0),u)try{return c(e,t)}catch(e){}if(s(e,t))return i(!n.f.call(e,t),e[t])}},function(e,t,r){var n=r(53),i=r(136),o=r(139),a=Math.max,s=Math.min;e.exports=function(e,t,r){var u,c,f,l,d,h,_=0,v=!1,p=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var r=u,n=c;return u=c=void 0,_=t,l=e.apply(n,r)}function g(e){return _=e,d=setTimeout(b,t),v?y(e):l}function w(e){var r=e-h;return void 0===h||r>=t||r<0||p&&e-_>=f}function b(){var e=i();if(w(e))return x(e);d=setTimeout(b,function(e){var r=t-(e-h);return p?s(r,f-(e-_)):r}(e))}function x(e){return d=void 0,m&&u?y(e):(u=c=void 0,l)}function R(){var e=i(),r=w(e);if(u=arguments,c=this,h=e,r){if(void 0===d)return g(h);if(p)return clearTimeout(d),d=setTimeout(b,t),y(h)}return void 0===d&&(d=setTimeout(b,t)),l}return t=o(t)||0,n(r)&&(v=!!r.leading,f=(p="maxWait"in r)?a(o(r.maxWait)||0,t):f,m="trailing"in r?!!r.trailing:m),R.cancel=function(){void 0!==d&&clearTimeout(d),_=0,u=h=c=d=void 0},R.flush=function(){return void 0===d?l:x(i())},R}},function(e,t,r){var n=r(137),i="object"==typeof self&&self&&self.Object===Object&&self,o=n||i||Function("return this")();e.exports=o},function(e,t,r){var n=r(76).Symbol;e.exports=n},function(e,t,r){var n=r(75),i=r(53);e.exports=function(e,t,r){var o=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return i(r)&&(o="leading"in r?!!r.leading:o,a="trailing"in r?!!r.trailing:a),n(e,t,{leading:o,maxWait:t,trailing:a})}},function(e,t,r){var n=r(11),i=r(23),o=r(6)("species");e.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||null==(r=n(a)[o])?t:i(r)}},function(e,t,r){var n,i,o,a=r(12),s=r(154),u=r(69),c=r(43),f=r(4),l=f.process,d=f.setImmediate,h=f.clearImmediate,_=f.MessageChannel,v=f.Dispatch,p=0,m={},y=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},g=function(e){y.call(e.data)};d&&h||(d=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return m[++p]=function(){s("function"==typeof e?e:Function(e),t)},n(p),p},h=function(e){delete m[e]},"process"==r(21)(l)?n=function(e){l.nextTick(a(y,e,1))}:v&&v.now?n=function(e){v.now(a(y,e,1))}:_?(o=(i=new _).port2,i.port1.onmessage=g,n=a(o.postMessage,o,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(n=function(e){f.postMessage(e+"","*")},f.addEventListener("message",g,!1)):n="onreadystatechange"in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),y.call(e)}}:function(e){setTimeout(a(y,e,1),0)}),e.exports={set:d,clear:h}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,r){var n=r(11),i=r(8),o=r(55);e.exports=function(e,t){if(n(e),i(t)&&t.constructor===e)return t;var r=o.f(e);return(0,r.resolve)(t),r.promise}},function(e,t,r){"use strict";var n=r(4),i=r(0),o=r(10),a=r(9),s=r(6)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:n[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(2)),i=a(r(3)),o=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;(0,n.default)(this,e),this.requestID=0,this.fps=r,this.interval=1e3/this.fps,this._cb=function(){},this.LOG=o.default.LOG,this.name=t,0==this.name.length&&(this.name=performance.now())}return(0,i.default)(e,[{key:"set_workcb",value:function(e){this._cb=e}},{key:"start",value:function(){var e=this;if(0==this.requestID){var t=performance.now();this.requestID=requestAnimationFrame((function r(n){e.requestID=requestAnimationFrame(r);var i=n-t;i>=e.interval&&(t=n-i%e.interval,e._cb&&e._cb(i))}))}else this.LOG.ERROR("["+this.name+"]","Animaite is running yet,You should stop animate before start it!")}},{key:"stop",value:function(){this.requestID>0&&(cancelAnimationFrame(this.requestID),this.requestID=0,this.LOG.WARN("["+this.name+"]","animate stop!"))}},{key:"renderfps",set:function(e){this.fps=e,this.interval=1e3/this.fps},get:function(){return this.fps}}]),e}();t.default=s,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(14)),i=s(r(2)),o=s(r(3)),a=r(7);function s(e){return e&&e.__esModule?e:{default:e}}var u={worker_remuxer_resource_loaded_success:"webworker_remuxer_res_init_ok",worker_decoder_resource_loaded_success:"webworker_decoder_res_init_ok"},c=function(){function e(t,r){var n=this;(0,i.default)(this,e),this.ob=t,this._queue=[];var o=r.toString();o=o.substring(o.indexOf("{")+1,o.lastIndexOf("}"));var s=new Blob([o],{type:"application/javascript"});this._worker_script=URL.createObjectURL(s),this._worker=new Worker(this._worker_script);var c=function(e){n._queue.length&&n._queue.shift().resolve(e.data)};this._worker.onmessage=function(e){u[e.data.type]&&(n.ob.emit(u[e.data.type],e.data.status),e.data.status&&(n._worker.onmessage=null,n.remove_msg=(0,a.EventDisposer)(n._worker,"message",c.bind(n))))},this.remove_error=(0,a.EventDisposer)(this._worker,"error",(function(e){n._queue.length&&n._queue.shift().reject(e)}))}return(0,o.default)(e,[{key:"dispatch",value:function(){for(var e=this,t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return new n.default((function(t,n){var i;e._queue.push({resolve:t,reject:n}),(i=e._worker).postMessage.apply(i,r)}))}},{key:"terminate",value:function(){this._queue=[],this._worker.terminate(),this.remove_error(),this._worker.onmessage?this._worker.onmessage=null:this.remove_msg(),URL.revokeObjectURL(this._worker_script)}}]),e}();t.default=c,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(2)),i=u(r(3)),o=u(r(1)),a=u(r(171)),s=u(r(87));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){(0,n.default)(this,e),this.LOG=o.default.LOG,this._audio_flg=!1,this.frame_list=[],this.DecodeEnd=!0,this.pcmplayer=null}return(0,i.default)(e,[{key:"_feed_g711u_to_decode",value:function(){if(this.DecodeEnd)if(0==this.frame_list.length);else{var e=this.frame_list.shift(),t=s.default.g711_decode(new Uint8Array(e),s.default.G711_TYPE.TP_ULAW);this.pcmplayer&&t.length>0&&this.pcmplayer.feed(new Uint8Array(t.buffer))}}},{key:"input_g711udata",value:function(e){this._audio_flg&&(this.frame_list.push(e),this.DecodeEnd=!0,this._feed_g711u_to_decode())}},{key:"stop",value:function(){this.LOG.WARN("voice flg",this._audio_flg),this.frame_list=[],this.DecodeEnd=!0}},{key:"destroy",value:function(){this.pcmplayer&&(this.pcmplayer.destroy(),this.pcmplayer=null)}},{key:"ready",get:function(){return!0}},{key:"volumne",get:function(){return this.pcmplayer||(this.pcmplayer=new a.default),this.pcmplayer.volumne},set:function(e){0==e?(this._audio_flg=!1,this.stop()):this._audio_flg=!0,this.pcmplayer||(this.pcmplayer=new a.default),this.pcmplayer.volumne=e}}]),e}();t.default=c,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={TP_ALAW:0,TP_ULAW:1},i=new Uint16Array([255,511,1023,2047,4095,8191,16383,32767]);new Uint8Array([1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,27,29,31,33,34,35,36,37,38,39,40,41,42,43,44,46,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128]),new Uint8Array([1,3,5,7,9,11,13,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,32,33,33,34,34,35,35,36,37,38,39,40,41,42,43,44,45,46,47,48,48,49,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127]);function o(e,t,r){var n=0;for(n=0;n<r;n++)if(e<=t[n])return n;return r}function a(e){var t,r=void 0;switch(r=(15&(e^=85))<<4,t=(112&e)>>4){case 0:r+=8;break;case 1:r+=264;break;default:r+=264,r<<=t-1}return 128&e?r:-r}function s(e){var t,r=void 0;return e<0?(e=132-e,r=127):(e+=132,r=255),(t=o(e,i,8))>=8?127^r:(t<<4|e>>t+3&15)^r}t.default={g711_decode:function(e,t){var r,i,o=new Uint16Array(e.length),s=e.length,u=0;if("[object Uint8Array]"!==Object.prototype.toString.call(e))return o;if(0==s)return o;if(n.TP_ALAW==t)for(u=0;u<s;u++)o[u]=a(e[u]);else for(u=0;u<s;u++)o[u]=(r=e[u],i=void 0,i=void 0,i=132+((15&(r=~r))<<3),i<<=(112&r)>>4,128&r?132-i:i-132);return o},g711_encode:function(e,t){var r=new ArrayBuffer(320),a=e.length,u=0,c=Object.prototype.toString.call(e);if("[object Int16Array]"!==c&&"[object Uint16Array]"!==c)return r;if(0==a)return r;var f,l,d,h,_=new DataView(e.buffer),v=new DataView(r);if(n.TP_ALAW==t)for(u=0;u<a;u++)v.setInt8(u,(f=_.getInt16(2*u,!0),l=void 0,d=void 0,h=void 0,d=void 0,h=void 0,f>=0?d=213:(d=85,f=-f-8),(l=o(f,i,8))>=8?127^d:(h=l<<4,(h|=l<2?f>>4&15:f>>l+3&15)^d)));else for(u=0;u<a;u++)v.setInt8(u,s(_.getInt16(2*u,!0)),!0);return r},G711_TYPE:n},e.exports=t.default},function(e,t,r){var n=r(8);e.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,r){e.exports={default:r(198),__esModule:!0}},function(e,t,r){"use strict";t.__esModule=!0;var n,i=r(47),o=(n=i)&&n.__esModule?n:{default:n};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,o.default)(t))&&"function"!=typeof t?e:t}},function(e,t,r){"use strict";t.__esModule=!0;var n=a(r(200)),i=a(r(204)),o=a(r(47));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,o.default)(t)));e.prototype=(0,i.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(n.default?(0,n.default)(e,t):e.__proto__=t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(1));r(145),r(147),r(148),r(149),r(166),r(176),r(209),r(211),r(212);var i=a(r(213)),o=a(r(86));function a(e){return e&&e.__esModule?e:{default:e}}var s="g711u";window.CV={H5:{live:{players:[],uid:0},vod:{players:[],uid:0}}},document.addEventListener("visibilitychange",(function(){var e=document.hidden;["live","vod"].forEach((function(t){CV.H5[t].players.forEach((function(t){t.emit("player_activate_status_changed",{isHidden:e})}))}))})),t.default={Events:{PLAYER_READY:"player_ready",PLAYER_STREAM_OPENED:"player_stream_opened",PLAYER_STREAM_CLOSED:"player_stream_closed",PLAYER_DETECT_VIDEO_CODECID_CHANGED:"player_detect_codec_changed",PLAYER_STREAM_INFO:"player_stream_info",PARSED_SMARTFRAME_FACECOMPARISON_RESULT:"parsed_smartframe_facecomparison_result",AUDIODATA_RECORD_ENCODE_TO_G711U:"audiodata_record_encode_to_g711u",PLAYER_CURRENT_UTCTIME:"player_current_utctime",PLAYER_STATUS_MSG:"player_status_msg",PLAYER_NO_ANYDECODER_FOUNDED:"no_any_decoders_founded",PLAYER_NO_MSE_DECODER_FOUNDED:"no_mse_decoder_founded",PLAYER_NO_CV_DECODER_FOUNDED:"no_cv_decoder_founded"},PlayerStatus:n.default.PlayerStatus,CreateLivePlayer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.render_type,i=e.use_smart,o=e.el,a=e.reconnect,s=e.debug;t||(t="");var u="live-"+CV.H5.live.uid++,c=new n.default({name:0==t.length?u:t,el:o,render_type:r,use_smart:i,reconnect:a,debug:!!s});return CV.H5.live.players.push(c),c.uid=u,c},CreateVodPlayer:function(e){var t=e.name,r=e.render_type,i=e.el,o=e.reconnect,a=e.debug,s="vod-"+CV.H5.vod.uid++,u=new n.default({name:0==t.length?s:t,el:i,render_type:r,vod:!0,use_smart:!1,reconnect:o,debug:!!a});return CV.H5.vod.players.push(u),u.uid=s,u},Recycle:function(e){["live","vod"].forEach((function(t){var r=CV.H5[t].players.findIndex((function(t){return t.uid==e.uid}));-1!=r&&CV.H5[t].players.splice(r,1)}))},CreateVoiceRecorder:function(){var e=null;return e?n.default.LOG.ERROR("RecordMediaStreamToIPC can only be inited once! "):e=new i.default({name:"RecordMediaStreamToIPC"}),e},CreateAudioPlayer:function(e){if(e.type==s)return new o.default},RenderType:{MSE:"MSE",FFMPEG:"FFMPEG",AUTO:"AUTO"}},e.exports=t.default},function(e,t,r){r(94),e.exports=r(0).Object.keys},function(e,t,r){var n=r(17),i=r(20);r(63)("keys",(function(){return function(e){return i(n(e))}}))},function(e,t,r){var n=r(18),i=r(38),o=r(96);e.exports=function(e){return function(t,r,a){var s,u=n(t),c=i(u.length),f=o(a,c);if(e&&r!=r){for(;c>f;)if((s=u[f++])!=s)return!0}else for(;c>f;f++)if((e||f in u)&&u[f]===r)return e||f||0;return!e&&-1}}},function(e,t,r){var n=r(39),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=n(e))<0?i(e+t,0):o(e,t)}},function(e,t,r){e.exports={default:r(98),__esModule:!0}},function(e,t,r){r(99);var n=r(0).Object;e.exports=function(e,t,r){return n.defineProperty(e,t,r)}},function(e,t,r){var n=r(5);n(n.S+n.F*!r(9),"Object",{defineProperty:r(10).f})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(35),o=(n=i)&&n.__esModule?n:{default:n};var a={createDom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=document.createElement(e);return i.className=n,i.innerHTML=t,(0,o.default)(r).forEach((function(t){var n=t,o=r[t];"video"===e||"audio"===e?o&&i.setAttribute(n,o):i.setAttribute(n,o)})),i},hasClass:function(e,t){return e.classList?Array.prototype.some.call(e.classList,(function(e){return e===t})):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},addClass:function(e,t){e.classList?t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach((function(t){t&&e.classList.add(t)})):a.hasClass(e,t)||(e.className+=" "+t)},removeClass:function(e,t){e.classList?t.split(/\s+/g).forEach((function(t){e.classList.remove(t)})):a.hasClass(e,t)&&t.split(/\s+/g).forEach((function(t){var r=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(r," ")}))},toggleClass:function(e,t){t.split(/\s+/g).forEach((function(t){a.hasClass(e,t)?a.removeClass(e,t):a.addClass(e,t)}))},findDom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments[1],r=void 0;try{r=e.querySelector(t)}catch(n){t.startsWith("#")&&(r=e.getElementById(t.slice(1)))}return r},padStart:function(e,t,r){for(var n=String(r),i=t>>0,o=Math.ceil(i/n.length),a=[],s=String(e);o--;)a.push(n);return a.join("").substring(0,i-s.length)+s},format:function(e){if(window.isNaN(e))return"";var t=a.padStart(Math.floor(e/3600),2,0),r=a.padStart(Math.floor((e-3600*t)/60),2,0),n=a.padStart(Math.floor(e-3600*t-60*r),2,0);return("00"===t?[r,n]:[t,r,n]).join(":")},event:function(e){if(e.touches){var t=e.touches[0]||e.changedTouches[0];e.clientX=t.clientX||0,e.clientY=t.clientY||0,e.offsetX=t.pageX-t.target.offsetLeft,e.offsetY=t.pageY-t.target.offsetTop}e._target=e.target||e.srcElement},typeOf:function(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]},deepCopy:function(e,t){if("Object"===a.typeOf(t)&&"Object"===a.typeOf(e))return(0,o.default)(t).forEach((function(r){"Object"!==a.typeOf(t[r])||t[r]instanceof Node?"Array"===a.typeOf(t[r])?e[r]="Array"===a.typeOf(e[r])?e[r].concat(t[r]):t[r]:e[r]=t[r]:e[r]?a.deepCopy(e[r],t[r]):e[r]=t[r]})),e},getBgImage:function(e){var t=(e.currentStyle||window.getComputedStyle(e,null)).backgroundImage;if(!t||"none"===t)return"";var r=document.createElement("a");return r.href=t.replace(/url\("|"\)/g,""),r.href},copyDom:function(e){if(e&&1===e.nodeType){var t=document.createElement(e.tagName);return Array.prototype.forEach.call(e.attributes,(function(e){t.setAttribute(e.name,e.value)})),e.innerHTML&&(t.innerHTML=e.innerHTML),t}return""},setInterval:function(e,t,r,n){e._interval[t]||(e._interval[t]=setInterval(r.bind(e),n))},clearInterval:function(e,t){clearInterval(e._interval[t]),e._interval[t]=null},createImgBtn:function(e,t,r,n){var i=a.createDom("xg-"+e,"",{},"xgplayer-"+e+"-img");if(i.style.backgroundImage='url("'+t+'")',r&&n){var o=void 0,s=void 0,u=void 0;["px","rem","em","pt","dp","vw","vh","vm","%"].every((function(e){return!(r.indexOf(e)>-1&&n.indexOf(e)>-1)||(o=parseFloat(r.slice(0,r.indexOf(e)).trim()),s=parseFloat(n.slice(0,n.indexOf(e)).trim()),u=e,!1)})),i.style.width=""+o+u,i.style.height=""+s+u,i.style.backgroundSize=""+o+u+" "+s+u,i.style.margin="start"===e?"-"+s/2+u+" auto auto -"+o/2+u:"auto 5px auto 5px"}return i},Hex2RGBA:function(e,t){var r=[];if(/^\#[0-9A-F]{3}$/i.test(e)){var n="#";e.replace(/[0-9A-F]/gi,(function(e){n+=e+e})),e=n}return/^#[0-9A-F]{6}$/i.test(e)?(e.replace(/[0-9A-F]{2}/gi,(function(e){r.push(parseInt(e,16))})),"rgba("+r.join(",")+", "+t+")"):"rgba(255, 255, 255, 0.1)"}};t.default=a,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(35),o=(n=i)&&n.__esModule?n:{default:n};var a={get device(){return a.os.isPc?"pc":"mobile"},get browser(){var e=navigator.userAgent.toLowerCase(),t={ie:/rv:([\d.]+)\) like gecko/,firfox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat((0,o.default)(t).filter((function(r){return t[r].test(e)})))[0]},get os(){var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),r=/(?:SymbianOS)/.test(e)||t,n=/(?:Android)/.test(e),i=/(?:Firefox)/.test(e),o=/(?:iPad|PlayBook)/.test(e)||n&&!/(?:Mobile)/.test(e)||i&&/(?:Tablet)/.test(e),a=/(?:iPhone)/.test(e)&&!o;return{isTablet:o,isPhone:a,isAndroid:n,isPc:!(a||n||r||o),isSymbian:r,isWindowsPhone:t,isFireFox:i}}};t.default=a,e.exports=t.default},function(e,t,r){"use strict";var n=r(66),i=r(103),o=r(107),a=r(115),s=r(116);(e.exports=function(e,t){var r,i,u,c,f;return arguments.length<2||"string"!=typeof e?(c=t,t=e,e=null):c=arguments[2],n(e)?(r=s.call(e,"c"),i=s.call(e,"e"),u=s.call(e,"w")):(r=u=!0,i=!1),f={value:t,configurable:r,enumerable:i,writable:u},c?o(a(c),f):f}).gs=function(e,t,r){var u,c,f,l;return"string"!=typeof e?(f=r,r=t,t=e,e=null):f=arguments[3],n(t)?i(t)?n(r)?i(r)||(f=r,r=void 0):r=void 0:(f=t,t=r=void 0):t=void 0,n(e)?(u=s.call(e,"c"),c=s.call(e,"e")):(u=!0,c=!1),l={get:t,set:r,configurable:u,enumerable:c},f?o(a(f),l):l}},function(e,t,r){"use strict";var n=r(104),i=/^\s*class[\s{/}]/,o=Function.prototype.toString;e.exports=function(e){return!!n(e)&&!i.test(o.call(e))}},function(e,t,r){"use strict";var n=r(105);e.exports=function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!n(e)}},function(e,t,r){"use strict";var n=r(106);e.exports=function(e){if(!n(e))return!1;try{return!!e.constructor&&e.constructor.prototype===e}catch(e){return!1}}},function(e,t,r){"use strict";var n=r(66),i={object:!0,function:!0,undefined:!0};e.exports=function(e){return!!n(e)&&hasOwnProperty.call(i,typeof e)}},function(e,t,r){"use strict";e.exports=r(108)()?Object.assign:r(109)},function(e,t,r){"use strict";e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,r){"use strict";var n=r(110),i=r(114),o=Math.max;e.exports=function(e,t){var r,a,s,u=o(arguments.length,2);for(e=Object(i(e)),s=function(n){try{e[n]=t[n]}catch(e){r||(r=e)}},a=1;a<u;++a)t=arguments[a],n(t).forEach(s);if(void 0!==r)throw r;return e}},function(e,t,r){"use strict";e.exports=r(111)()?Object.keys:r(112)},function(e,t,r){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t,r){"use strict";var n=r(45),i=Object.keys;e.exports=function(e){return i(n(e)?Object(e):e)}},function(e,t,r){"use strict";e.exports=function(){}},function(e,t,r){"use strict";var n=r(45);e.exports=function(e){if(!n(e))throw new TypeError("Cannot use null or undefined");return e}},function(e,t,r){"use strict";var n=r(45),i=Array.prototype.forEach,o=Object.create,a=function(e,t){var r;for(r in e)t[r]=e[r]};e.exports=function(e){var t=o(null);return i.call(arguments,(function(e){n(e)&&a(Object(e),t)})),t}},function(e,t,r){"use strict";e.exports=r(117)()?String.prototype.contains:r(118)},function(e,t,r){"use strict";var n="razdwatrzy";e.exports=function(){return"function"==typeof n.contains&&(!0===n.contains("dwa")&&!1===n.contains("foo"))}},function(e,t,r){"use strict";var n=String.prototype.indexOf;e.exports=function(e){return n.call(this,e,arguments[1])>-1}},function(e,t,r){"use strict";e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},function(e,t,r){r(25),r(27),e.exports=r(126)},function(e,t,r){"use strict";var n=r(122),i=r(67),o=r(19),a=r(18);e.exports=r(46)(Array,"Array",(function(e,t){this._t=a(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])}),"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(e,t){e.exports=function(){}},function(e,t,r){"use strict";var n=r(32),i=r(31),o=r(26),a={};r(13)(a,r(6)("iterator"),(function(){return this})),e.exports=function(e,t,r){e.prototype=n(a,{next:i(1,r)}),o(e,t+" Iterator")}},function(e,t,r){var n=r(10),i=r(11),o=r(20);e.exports=r(9)?Object.defineProperties:function(e,t){i(e);for(var r,a=o(t),s=a.length,u=0;s>u;)n.f(e,r=a[u++],t[r]);return e}},function(e,t,r){var n=r(39),i=r(36);e.exports=function(e){return function(t,r){var o,a,s=String(i(t)),u=n(r),c=s.length;return u<0||u>=c?e?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}}},function(e,t,r){var n=r(11),i=r(71);e.exports=r(0).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},function(e,t,r){e.exports={default:r(128),__esModule:!0}},function(e,t,r){r(27),r(25),e.exports=r(48).f("iterator")},function(e,t,r){e.exports={default:r(130),__esModule:!0}},function(e,t,r){r(131),r(52),r(134),r(135),e.exports=r(0).Symbol},function(e,t,r){"use strict";var n=r(4),i=r(15),o=r(9),a=r(5),s=r(68),u=r(49).KEY,c=r(16),f=r(41),l=r(26),d=r(30),h=r(6),_=r(48),v=r(50),p=r(132),m=r(72),y=r(11),g=r(8),w=r(17),b=r(18),x=r(44),R=r(31),E=r(32),O=r(133),k=r(74),U=r(51),S=r(10),A=r(20),L=k.f,T=S.f,M=O.f,D=n.Symbol,C=n.JSON,P=C&&C.stringify,F=h("_hidden"),I=h("toPrimitive"),j={}.propertyIsEnumerable,G=f("symbol-registry"),B=f("symbols"),N=f("op-symbols"),V=Object.prototype,W="function"==typeof D&&!!U.f,H=n.QObject,Y=!H||!H.prototype||!H.prototype.findChild,q=o&&c((function(){return 7!=E(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=L(V,t);n&&delete V[t],T(e,t,r),n&&e!==V&&T(V,t,n)}:T,z=function(e){var t=B[e]=E(D.prototype);return t._k=e,t},X=W&&"symbol"==typeof D.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof D},$=function(e,t,r){return e===V&&$(N,t,r),y(e),t=x(t,!0),y(r),i(B,t)?(r.enumerable?(i(e,F)&&e[F][t]&&(e[F][t]=!1),r=E(r,{enumerable:R(0,!1)})):(i(e,F)||T(e,F,R(1,{})),e[F][t]=!0),q(e,t,r)):T(e,t,r)},J=function(e,t){y(e);for(var r,n=p(t=b(t)),i=0,o=n.length;o>i;)$(e,r=n[i++],t[r]);return e},K=function(e){var t=j.call(this,e=x(e,!0));return!(this===V&&i(B,e)&&!i(N,e))&&(!(t||!i(this,e)||!i(B,e)||i(this,F)&&this[F][e])||t)},Q=function(e,t){if(e=b(e),t=x(t,!0),e!==V||!i(B,t)||i(N,t)){var r=L(e,t);return!r||!i(B,t)||i(e,F)&&e[F][t]||(r.enumerable=!0),r}},Z=function(e){for(var t,r=M(b(e)),n=[],o=0;r.length>o;)i(B,t=r[o++])||t==F||t==u||n.push(t);return n},ee=function(e){for(var t,r=e===V,n=M(r?N:b(e)),o=[],a=0;n.length>a;)!i(B,t=n[a++])||r&&!i(V,t)||o.push(B[t]);return o};W||(s((D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(r){this===V&&t.call(N,r),i(this,F)&&i(this[F],e)&&(this[F][e]=!1),q(this,e,R(1,r))};return o&&Y&&q(V,e,{configurable:!0,set:t}),z(e)}).prototype,"toString",(function(){return this._k})),k.f=Q,S.f=$,r(73).f=O.f=Z,r(34).f=K,U.f=ee,o&&!r(22)&&s(V,"propertyIsEnumerable",K,!0),_.f=function(e){return z(h(e))}),a(a.G+a.W+a.F*!W,{Symbol:D});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;te.length>re;)h(te[re++]);for(var ne=A(h.store),ie=0;ne.length>ie;)v(ne[ie++]);a(a.S+a.F*!W,"Symbol",{for:function(e){return i(G,e+="")?G[e]:G[e]=D(e)},keyFor:function(e){if(!X(e))throw TypeError(e+" is not a symbol!");for(var t in G)if(G[t]===e)return t},useSetter:function(){Y=!0},useSimple:function(){Y=!1}}),a(a.S+a.F*!W,"Object",{create:function(e,t){return void 0===t?E(e):J(E(e),t)},defineProperty:$,defineProperties:J,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:ee});var oe=c((function(){U.f(1)}));a(a.S+a.F*oe,"Object",{getOwnPropertySymbols:function(e){return U.f(w(e))}}),C&&a(a.S+a.F*(!W||c((function(){var e=D();return"[null]"!=P([e])||"{}"!=P({a:e})||"{}"!=P(Object(e))}))),"JSON",{stringify:function(e){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);if(r=t=n[1],(g(t)||void 0!==e)&&!X(e))return m(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!X(t))return t}),n[1]=t,P.apply(C,n)}}),D.prototype[I]||r(13)(D.prototype,I,D.prototype.valueOf),l(D,"Symbol"),l(Math,"Math",!0),l(n.JSON,"JSON",!0)},function(e,t,r){var n=r(20),i=r(51),o=r(34);e.exports=function(e){var t=n(e),r=i.f;if(r)for(var a,s=r(e),u=o.f,c=0;s.length>c;)u.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,r){var n=r(18),i=r(73).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(e){return a.slice()}}(e):i(n(e))}},function(e,t,r){r(50)("asyncIterator")},function(e,t,r){r(50)("observable")},function(e,t,r){var n=r(76);e.exports=function(){return n.Date.now()}},function(e,t,r){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(this,r(138))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){var n=r(53),i=r(140),o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(n(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=n(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var r=s.test(e);return r||u.test(e)?c(e.slice(2),r?2:8):a.test(e)?NaN:+e}},function(e,t,r){var n=r(141),i=r(144);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==n(e)}},function(e,t,r){var n=r(77),i=r(142),o=r(143),a=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},function(e,t,r){var n=r(77),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(e){}var i=a.call(e);return n&&(t?e[s]=r:delete e[s]),i}},function(e,t){var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,r){"use strict";var n=a(r(28)),i=a(r(1)),o=r(7);function a(e){return e&&e.__esModule?e:{default:e}}i.default.install("ws-loader",(function(){var e=this,t=this,r=i.default.LOG;if(window.WebSocket&&window.WebSocket.prototype.send){var a=function(t){r.WARN("ws open success!",e._ws,t),e.emit("send",e.logParams.cinfo.cmd)},s=function(n){var i;r.WARN("[ws]",n,"conn closed cb fired!"),e.emit("ws_closed",{userStop:t._requestAbort,error:t._ws_socket_error}),(i=e._ws)&&3==i.readyState&&(i.onopen=null,i.onmessage=null,i.onclose=null,i.onerror=null,i=null),e.emit("loading_tips",{show:!1}),e.emit("player_stream_closed",e.config.logParams)},u=function(e){e.data instanceof ArrayBuffer&&c(e.data)},c=function(t){var r=t,n=e._receivedLength;e._receivedLength+=r.byteLength;var i=(0,o.parse_frameheader)(r);i.is_key_frame&&(e.emit("wsloader_info",{vi_fps:e._debug_vi_fps.get_avrfps()}),e._recv_first_iframe||(e._recv_first_iframe=!0,e.emit("loading_tips",{show:!1}),e.emit("player_stream_opened",e.config.logParams)));var a=e.logParams.cinfo.cmd.Data,s=a.Video,u=a.Audio,c=a.Smart;"video"==i.type&&s?(e._debug_vi_fps.test_fps(),e.emit("ws_data_incoming_video",{header:i,chunk:r,recv:{byteStart:n,byteEnd:e._receivedLength}})):"audio"==i.type&&u?e.emit("ws_data_incoming_audio",{header:i,chunk:r,recv:{byteStart:n,byteEnd:e._receivedLength}}):"smart"==i.type&&c&&e.emit("ws_data_incoming_smart",{header:i,chunk:r,recv:{byteStart:n,byteEnd:e._receivedLength}})},f=function(t){var n={code:t.code,msg:t.message};r.ERROR("ws error occrus",n),e._ws_socket_error=!0},l=function(t){e._recv_first_iframe=!1,e.emit("loading_tips",{show:!0});try{e._ws_socket_error=!1,e._requestAbort=!1,r.WARN("try open ws: "+t.url),e._ws=new WebSocket(t.url,t.protocols),e._ws.binaryType="arraybuffer",e._ws.onopen=a.bind(e),e._ws.onmessage=u.bind(e),e._ws.onclose=s.bind(e),e._ws.onerror=f.bind(e)}catch(e){var n={code:e.code,msg:e.message};r.ERROR("[ws]",n)}};(0,o.safe_setproperty)(t,"_ws",null),(0,o.safe_setproperty)(t,"_ws_socket_error",!1),(0,o.safe_setproperty)(t,"_requestAbort",!1),(0,o.safe_setproperty)(t,"_receivedLength",0),(0,o.safe_setproperty)(t,"_recv_first_iframe",!0),(0,o.safe_setproperty)(t,"_debug_vi_fps",new o.TestAvr);var d=function(t){r.DEBUG(e.config.name,t),_(),l(t)};t.on("open_request",d);var h=function(t){e._ws&&1==e._ws.readyState&&(r.DEBUG(t),e._ws.send((0,n.default)(t)))};t.on("send",h);var _=function(){var t=e._ws;t&&(0===t.readyState||1===t.readyState?(e._requestAbort=!0,t.close(),r.WARN("try to close current conn!")):2===t.readyState?r.WARN("ignore,is closing!"):3===t.readyState&&r.WARN("ignore,already closed!"))};t.on("abort_request",_);t.on("destroy",(function e(){t.off("open_request",d),t.off("abort_request",_),t.off("send",h),t.off("destroy",e)}))}else r.ERROR("websocket unsupported!ws-loader init failed!")}),[])},function(e,t,r){var n=r(0),i=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},function(e,t,r){"use strict";var n,i=r(1),o=(n=i)&&n.__esModule?n:{default:n},a=r(7);o.default.install("stream-info",(function(){var e=this;this.streaminfo={decodeElapsed_calc:new a.TestAvr({max_value:0,min_value:1e3}),duration_calc:new a.TestAvr({max_value:0,min_value:1e3}),remuxElapsed_calc:new a.TestAvr({max_value:0,min_value:1e3}),maxRawFrameBytes:0};var t=function(t){document.querySelector("#"+e.config.name+"_wsloader").innerHTML="<p>vi_fps = "+t.vi_fps+"</p>"},r=function(t){var r=document.querySelector("#"+e.config.name+"_decoder");r&&("[remuxer]"==e.decoder.prefix?r.innerHTML="\n                    <p>delay = "+t.delay.toFixed(2)+", videoframes = "+t.videoframes+"</p>\n                    <p>duration : "+t.duration.min.toFixed(2)+", "+t.duration.max.toFixed(2)+",avr_v = "+t.duration.avr_v.toFixed(2)+" </p>\n                    <p>remux : "+t.remuxElapsed.min.toFixed(2)+", "+t.remuxElapsed.max.toFixed(2)+",avr_v = "+t.remuxElapsed.avr_v.toFixed(2)+"</p>\n                    <p>max_ants_frame_bytes = "+t.maxRawFrameBytes+"</p>\n                ":r.innerHTML="\n                    <p>delay = "+t.delay.toFixed(2)+", videoframes = "+t.videoframes+"</p>\n                    <p>duration : "+t.duration.min.toFixed(2)+", "+t.duration.max.toFixed(2)+",avr_v = "+t.duration.avr_v.toFixed(2)+" </p>\n                    <p>decode : "+t.decodeElapsed.min.toFixed(2)+", "+t.decodeElapsed.max.toFixed(2)+",avr_v = "+t.decodeElapsed.avr_v.toFixed(2)+"</p>\n                    <p>max_ants_frame_bytes = "+t.maxRawFrameBytes+"</p>\n                ")},n=function(t){var r=document.createDocumentFragment(),n=(0,a.create_domnode_with_css)("div","","\n            position:absolute;\n         \n           \n            z-index:1000;\n            color:red;\n            font-weight:bold;\n            "),i=(0,a.create_domnode_with_css)("div",e.config.name+"_wsloader",""),o=(0,a.create_domnode_with_css)("div",e.config.name+"_decoder","");n.appendChild(i),n.appendChild(o),r.appendChild(n),t.appendChild(r)},i=function(e){var r=e.vi_fps;t({vi_fps:r})},o=function(e){r(e)},s=function(){t({vi_fps:0}),r({delay:0,videoframes:0,duration:{min:0,max:0,avr_v:0},remuxElapsed:{min:0,max:0,avr_v:0},decodeElapsed:{min:0,max:0,avr_v:0},maxRawFrameBytes:0})};this.config.debug&&(e.on("infopanel_atatch",n),e.on("wsloader_info",i),e.on("remuxer_info",o),e.on("abort_request",s),e.on("destroy",(function t(){e.off("infopanel_atatch",n),e.off("remuxer_info",o),e.off("wsloader_info",i),e.off("abort_request",s),e.off("destroy",t)})))}))},function(e,t,r){"use strict";var n,i=r(1),o=(n=i)&&n.__esModule?n:{default:n},a=r(7);o.default.install("reconnector",(function(){var e=this,t=this,r=o.default.LOG;if(this.config.reconnect){(0,a.safe_setproperty)(this,"_reconnector",{interval_ms:5e3,tid:-1});var n=function(n){var i=n.userStop,o=n.error;-1!=e._reconnector.tid&&(clearTimeout(e._reconnector.tid),e._reconnector.tid=-1),!o&&i||(r.ERROR("detect error close! ,just run  reconnecting "),e._reconnector.tid=setTimeout((function(){r.WARN("reconn fired! "),t.emit("open_request",t.logParams.cinfo)}),t._reconnector.interval_ms))};t.on("ws_closed",n);t.on("abort_request",(function(){-1!=e._reconnector.tid&&(clearTimeout(e._reconnector.tid),e._reconnector.tid=-1)}));t.on("destroy",(function e(){t.off("ws_closed",n),t.off("destroy",e)}))}else r.WARN("reconnect flag is ",!!this.config.reconnect)}),["ws-loader"])},function(e,t,r){"use strict";var n=f(r(14)),i=f(r(2)),o=f(r(3)),a=f(r(1)),s=f(r(160)),u=f(r(163)),c=r(7);function f(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){(0,i.default)(this,e),this.reset(),this.last_st=0}return(0,o.default)(e,[{key:"reset",value:function(){this.last_vals=0}},{key:"test",value:function(e){if(0==this.last_vals)return this.last_vals=e,40;var t=(e-this.last_vals)/90;return(t>=1500||t<=10)&&(t=40),this.last_vals=e,t}}]),e}();a.default.install("base-decoder",(function(){var e=this,t=this,r=a.default.LOG;this._decoder_info={_decoder_id:0,_video_width:0,_video_height:0},[{obj:this,k:"CalcDeltaValue",v:new l},{obj:this,k:"Html5Decoder",v:null},{obj:this,k:"FfmpegDecoder",v:null},{obj:this,k:"decoder",v:null}].forEach((function(e){var t=e.obj,r=e.k,n=e.v;(0,c.safe_setproperty)(t,r,n)})),this.set_delay=function(t){e.decoder.delay=t},t.capture=function(){return e.decoder?e.decoder.capture():null},t.resize=function(t,n){if(e.decoder)return r.DEBUG("player resize",t,n),e.decoder.resize(t,n)};var i=function(n){e.decoder._raw_videoframes.splice(0,e.decoder._raw_videoframes.length-1),r.DEBUG("switch_decoder",n);var i=e.decoder._raw_videoframes.concat(),o=e.decoder._drop_until_wait_i;if(e.decoder.stop(),"MSE"==n)e.Html5Decoder||(e.Html5Decoder=new u.default(t),e.Html5Decoder.load_webworker().then((function(){e.Html5Decoder._isOperateOver=!0}))),"[remuxer]"!=e.decoder.prefix&&(e.decoder=e.Html5Decoder,e.decoder.attach(e.rootElement));else{if("FFMPEG"!=n)return void r.ERROR("Unsupported render_type:",n);e.FfmpegDecoder||(e.FfmpegDecoder=new s.default(t),e.FfmpegDecoder.load_webworker().then((function(){e.FfmpegDecoder._isOperateOver=!0}))),e.decoder=e.FfmpegDecoder,e.decoder.attach(e.rootElement),e.decoder.start()}e.decoder._raw_videoframes=i,e.decoder._drop_until_wait_i=o},o=function(t){var n=t.header,o=t.chunk,a=t.recv;if(e.emit("video_frame_info",{header:n,chunk:o,recv:a}),!e._allbytesdropped){switch(n.type){case"video":if(e.decoder.check_timestamp(e.CalcDeltaValue.test(n.frameTimestamp),Math.floor(e._debug_vi_fps+.5)),e.decoder.input_data({header:n,payload:o}),n.is_key_frame){var s={codecId:n.video.codecId,width:n.video.vw,height:n.video.vh},u=e._decoder_info,c=u._decoder_id,f=u._video_width,l=u._video_height,d=f!=s.width||l!=s.height;if(c!=s.codecId){if(r.WARN("[liveplayer]","codecId:old["+c+"] != new["+s.codecId+"]"),e.rootElement)if(16==s.codecId){var h=MediaSource.isTypeSupported('video/mp4; codecs="hvc1.1.6.L123"');if(!h||"MSE"!=e.config.render_type&&"AUTO"!=e.config.render_type){if("AUTO"!=e.config.render_type&&"FFMPEG"!=e.config.render_type)return e.decoder.reset(),-3;i("FFMPEG")}else i("MSE")}else{if(8!=s.codecId)return r.ERROR("[CVH5LivePlayer]","unsupported codec Id:",s.codecId),-3;if("FFMPEG"==e.config.render_type)return e.decoder.reset(),console.error("player_detect_codec_changed"),e.emit("player_detect_codec_changed",e,"avc"),-2;i("MSE")}}else d&&(r.WARN("resolution:old["+f+","+l+"] != new["+s.width+","+s.height+"]"),e.decoder._process_resolution_changed(s));e._decoder_info._decoder_id=s.codecId,e._decoder_info._video_width=s.width,e._decoder_info._video_height=s.height,e.decoder._check_delay_and_try_drop()}e.decoder.feed_segments()}return n}};t.on("ws_data_incoming_video",o);var f=function(t){e.decoder&&e.decoder.attach(t)};t.on("decoder_attach",f);var d=function(){e.decoder&&e.decoder.stop(),e.CalcDeltaValue.reset()};t.on("abort_request",d);var h=function(){e.decoder&&e.decoder.start()};t.on("open_request",h),(0,c.safe_setproperty)(t,"_allbytesdropped",!1);var _=function(t){t.isHidden?e._allbytesdropped=!0:(e.decoder&&(e.decoder._drop_until_wait_i=!0),e._allbytesdropped=!1)};t.on("player_activate_status_changed",_);t.on("destroy",(function r(){t.off("ws_data_incoming_video",o),t.off("decoder_attach",f),t.off("open_request",h),t.off("abort_request",d),t.off("player_activate_status_changed",_),e.CalcDeltaValue=null,e.FfmpegDecoder&&(e.FfmpegDecoder.destroy(),e.FfmpegDecoder=null),e.Html5Decoder&&(e.Html5Decoder.destroy(),e.Html5Decoder=null),e.decoder=null,e.rootElement&&(e.rootElement.innerHTML=""),t.off("destroy",r)})),"MSE"==this.config.render_type?(this.Html5Decoder=new u.default(t),this.Html5Decoder.load_webworker().then((function(t){t?(e.decoder=e.Html5Decoder,e.emit("player_ready",{})):(r.ERROR("setup remuxer worker failed! Init Failed!"),e.Html5Decoder&&(e.Html5Decoder.destroy(),e.Html5Decoder=null),e.emit("no_mse_decoder_founded"))}))):"FFMPEG"==this.config.render_type?(this.FfmpegDecoder=new s.default(t),this.FfmpegDecoder.load_webworker().then((function(t){t?(e.decoder=e.FfmpegDecoder,e.emit("player_ready",{})):(r.ERROR("setup decoder worker failed! Init Failed!"),e.FfmpegDecoder&&(e.FfmpegDecoder.destroy(),e.FfmpegDecoder=null),e.emit("no_cv_decoder_founded"))}))):"AUTO"==this.config.render_type&&(this.FfmpegDecoder=new s.default(t),this.Html5Decoder=new u.default(t),n.default.all([this.FfmpegDecoder.load_webworker(),this.Html5Decoder.load_webworker()]).then((function(t){console.log(t),t[0]||(r.ERROR("setup decoder worker failed! Init Failed!"),e.FfmpegDecoder&&(e.FfmpegDecoder.destroy(),e.FfmpegDecoder=null),e.config.render_type="MSE",e.emit("no_cv_decoder_founded")),t[1]||(r.ERROR("setup remuxer worker failed! Init Failed!"),e.Html5Decoder&&(e.Html5Decoder.destroy(),e.Html5Decoder=null),e.config.render_type="FFMPEG",e.emit("no_mse_decoder_founded")),t.every((function(e){return!e}))?(e.config.render_type="",e.emit("no_any_decoders_founded")):e.Html5Decoder?(e.decoder=e.Html5Decoder,e.emit("player_ready",{})):e.FfmpegDecoder&&(e.decoder=e.FfmpegDecoder,e.emit("player_ready",{}))})).catch((function(e){console.error(e)})))}),["ws-loader"])},function(e,t,r){r(52),r(27),r(25),r(151),r(158),r(159),e.exports=r(0).Promise},function(e,t,r){"use strict";var n,i,o,a,s=r(22),u=r(4),c=r(12),f=r(33),l=r(5),d=r(8),h=r(23),_=r(54),v=r(29),p=r(79),m=r(80).set,y=r(155)(),g=r(55),w=r(81),b=r(156),x=r(82),R=u.TypeError,E=u.process,O=E&&E.versions,k=O&&O.v8||"",U=u.Promise,S="process"==f(E),A=function(){},L=i=g.f,T=!!function(){try{var e=U.resolve(1),t=(e.constructor={})[r(6)("species")]=function(e){e(A,A)};return(S||"function"==typeof PromiseRejectionEvent)&&e.then(A)instanceof t&&0!==k.indexOf("6.6")&&-1===b.indexOf("Chrome/66")}catch(e){}}(),M=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},D=function(e,t){if(!e._n){e._n=!0;var r=e._c;y((function(){for(var n=e._v,i=1==e._s,o=0,a=function(t){var r,o,a,s=i?t.ok:t.fail,u=t.resolve,c=t.reject,f=t.domain;try{s?(i||(2==e._h&&F(e),e._h=1),!0===s?r=n:(f&&f.enter(),r=s(n),f&&(f.exit(),a=!0)),r===t.promise?c(R("Promise-chain cycle")):(o=M(r))?o.call(r,u,c):u(r)):c(n)}catch(e){f&&!a&&f.exit(),c(e)}};r.length>o;)a(r[o++]);e._c=[],e._n=!1,t&&!e._h&&C(e)}))}},C=function(e){m.call(u,(function(){var t,r,n,i=e._v,o=P(e);if(o&&(t=w((function(){S?E.emit("unhandledRejection",i,e):(r=u.onunhandledrejection)?r({promise:e,reason:i}):(n=u.console)&&n.error&&n.error("Unhandled promise rejection",i)})),e._h=S||P(e)?2:1),e._a=void 0,o&&t.e)throw t.v}))},P=function(e){return 1!==e._h&&0===(e._a||e._c).length},F=function(e){m.call(u,(function(){var t;S?E.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})}))},I=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),D(t,!0))},j=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw R("Promise can't be resolved itself");(t=M(e))?y((function(){var n={_w:r,_d:!1};try{t.call(e,c(j,n,1),c(I,n,1))}catch(e){I.call(n,e)}})):(r._v=e,r._s=1,D(r,!1))}catch(e){I.call({_w:r,_d:!1},e)}}};T||(U=function(e){_(this,U,"Promise","_h"),h(e),n.call(this);try{e(c(j,this,1),c(I,this,1))}catch(e){I.call(this,e)}},(n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(56)(U.prototype,{then:function(e,t){var r=L(p(this,U));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=S?E.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&D(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new n;this.promise=e,this.resolve=c(j,e,1),this.reject=c(I,e,1)},g.f=L=function(e){return e===U||e===a?new o(e):i(e)}),l(l.G+l.W+l.F*!T,{Promise:U}),r(26)(U,"Promise"),r(83)("Promise"),a=r(0).Promise,l(l.S+l.F*!T,"Promise",{reject:function(e){var t=L(this);return(0,t.reject)(e),t.promise}}),l(l.S+l.F*(s||!T),"Promise",{resolve:function(e){return x(s&&this===a?U:this,e)}}),l(l.S+l.F*!(T&&r(157)((function(e){U.all(e).catch(A)}))),"Promise",{all:function(e){var t=this,r=L(t),n=r.resolve,i=r.reject,o=w((function(){var r=[],o=0,a=1;v(e,!1,(function(e){var s=o++,u=!1;r.push(void 0),a++,t.resolve(e).then((function(e){u||(u=!0,r[s]=e,--a||n(r))}),i)})),--a||n(r)}));return o.e&&i(o.v),r.promise},race:function(e){var t=this,r=L(t),n=r.reject,i=w((function(){v(e,!1,(function(e){t.resolve(e).then(r.resolve,n)}))}));return i.e&&n(i.v),r.promise}})},function(e,t,r){var n=r(11);e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){var o=e.return;throw void 0!==o&&n(o.call(e)),t}}},function(e,t,r){var n=r(19),i=r(6)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||o[i]===e)}},function(e,t){e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,r){var n=r(4),i=r(80).set,o=n.MutationObserver||n.WebKitMutationObserver,a=n.process,s=n.Promise,u="process"==r(21)(a);e.exports=function(){var e,t,r,c=function(){var n,i;for(u&&(n=a.domain)&&n.exit();e;){i=e.fn,e=e.next;try{i()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(u)r=function(){a.nextTick(c)};else if(!o||n.navigator&&n.navigator.standalone)if(s&&s.resolve){var f=s.resolve(void 0);r=function(){f.then(c)}}else r=function(){i.call(n,c)};else{var l=!0,d=document.createTextNode("");new o(c).observe(d,{characterData:!0}),r=function(){d.data=l=!l}}return function(n){var i={fn:n,next:void 0};t&&(t.next=i),e||(e=i,r()),t=i}}},function(e,t,r){var n=r(4).navigator;e.exports=n&&n.userAgent||""},function(e,t,r){var n=r(6)("iterator"),i=!1;try{var o=[7][n]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var o=[7],a=o[n]();a.next=function(){return{done:r=!0}},o[n]=function(){return a},e(o)}catch(e){}return r}},function(e,t,r){"use strict";var n=r(5),i=r(0),o=r(4),a=r(79),s=r(82);n(n.P+n.R,"Promise",{finally:function(e){var t=a(this,i.Promise||o.Promise),r="function"==typeof e;return this.then(r?function(r){return s(t,e()).then((function(){return r}))}:e,r?function(r){return s(t,e()).then((function(){throw r}))}:e)}})},function(e,t,r){"use strict";var n=r(5),i=r(55),o=r(81);n(n.S,"Promise",{try:function(e){var t=i.f(this),r=o(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=d(r(14)),i=d(r(2)),o=d(r(3)),a=r(7),s=d(r(84)),u=d(r(161)),c=d(r(1)),f=d(r(162)),l=d(r(85));function d(e){return e&&e.__esModule?e:{default:e}}var h=function(){function e(t){(0,i.default)(this,e),this.ob=t,this.LOG=c.default.LOG,t.rootElement||this.LOG.WARN("[decoder]","not set rootElement, Attach it when you begin to use the ob object!"),this._el=t.rootElement,this.worker=null,this.yuvcanvas=null,this.render=new s.default("ffmpeg-decoder",30),this._raw_bufferd_framenum=30,this._raw_videoframes=[],this._yuvframes_threshold=3,this._yuvframes=[],this._force_first_initSegment=!0,this._isOperateOver=!0,this.prefix="[decoder]",this.reset()}return(0,o.default)(e,[{key:"load_webworker",value:function(){var e=this;return new n.default((function(t,r){e.ob.once("webworker_decoder_res_init_ok",(function(r){t(r?e.worker:null)})),e.worker=new l.default(e.ob,f.default)}))}},{key:"destroy",value:function(){this.worker&&this.worker.terminate()}},{key:"_process_resolution_changed",value:function(e){e.codecId;var t=e.width,r=e.height;this.LOG.WARN("resolution changed",t,r)}},{key:"check_timestamp",value:function(e,t){t<25?t=25:t<=30||(t=30),t!=this.render.renderfps&&(this.LOG.WARN("[decoder]","fps changed : ["+this.render.renderfps+"]--\x3e["+t+"]"),this.render.renderfps=t)}},{key:"_process_worker_msg",value:function(e){switch(e.type){case"decoded_frame":this.ob.streaminfo.decodeElapsed_calc.test_value(e.decodeElapsed),this.ob.streaminfo.maxRawFrameBytes=e.maxRawFrameBytes,this._yuvframes.length>=this._yuvframes_threshold&&this._yuvframes.shift(),"yuv"==e.mode&&this._yuvframes.push(e),this._force_first_initSegment&&(this._force_first_initSegment=!1),this._isOperateOver=!0,this.feed_segments()}}},{key:"_check_delay_and_try_drop",value:function(){return!(this._raw_videoframes.length<this._raw_bufferd_framenum)&&(this.LOG.WARN("[decoder]","videoframs:"+this._raw_videoframes.length+" >= maxvideoframes "+this._raw_bufferd_framenum+" ,will drop"),this._drop_until_wait_i=!0,!0)}},{key:"send_msg_to_worker",value:function(e){this.worker&&this.worker.dispatch(e)}},{key:"input_data",value:function(e){if(e){if(this._drop_until_wait_i){if(!e.header.is_key_frame||16!=e.header.video.codecId)return;this._drop_until_wait_i=!1}this._raw_videoframes.push(e)}}},{key:"feed_segments",value:function(){var e=this;if(this._isOperateOver&&this.worker){var t=this._raw_videoframes.shift();t&&(t.header.is_key_frame&&this.ob.emit("remuxer_info",{decodeElapsed:{max:this.ob.streaminfo.decodeElapsed_calc.max,min:this.ob.streaminfo.decodeElapsed_calc.min,avr_v:this.ob.streaminfo.decodeElapsed_calc.get_avrvalue()},duration:{max:this.ob.streaminfo.duration_calc.max,min:this.ob.streaminfo.duration_calc.min,avr_v:this.ob.streaminfo.duration_calc.get_avrvalue()},maxRawFrameBytes:this.ob.streaminfo.maxRawFrameBytes,delay:this._yuvframes.length,videoframes:this._raw_videoframes.length}),this.worker.dispatch({type:"RawFrame",header:t.header,ar:t.payload,forceInitSegment:this._force_first_initSegment},[t.payload]).then((function(t){e._process_worker_msg(t)})).catch((function(t){e.LOG.ERROR(t),e._drop_until_wait_i=!0,e._isOperateOver=!0})),this._isOperateOver=!1)}}},{key:"draw",value:function(){var e=this._yuvframes.shift();if(this.yuvcanvas&&e)if(e.frameTime!=this.tmp_timestamp&&(this.tmp_timestamp=e.frameTime,this.ob.emit("player_current_utctime",{utctime:this.tmp_timestamp})),e.mode="yuv"){var t={yData:new Uint8Array(e.yData),yDataPerRow:e.w,yRowCnt:e.h,uData:new Uint8Array(e.uData),uDataPerRow:e.w/2,uRowCnt:e.h/2,vData:new Uint8Array(e.vData),vDataPerRow:e.w/2,vRowCnt:e.h/2};this.yuvcanvas.drawNextOutputPicture(t)}else(e.mode="rgba")&&this.yuvcanvas.drawNextOutputPicture(e)}},{key:"start",value:function(){this.worker&&(this.tmp_timestamp=null,this.render.set_workcb(this.draw.bind(this)),this.render.start())}},{key:"stop",value:function(){this.render.set_workcb(null),this.render.stop(),this.reset(),this.yuvcanvas&&this.yuvcanvas.clear()}},{key:"reset",value:function(){this._yuvframes=[],this._raw_videoframes=[],this._isOperateOver=!0,this._drop_until_wait_i=!0,this._force_first_initSegment=!0}},{key:"create_videoObject",value:function(){return this._video=(0,a.create_domnode_with_css)("canvas","rendertarget-"+this.ob.config.name,"\n             width:100%;\n             height:100%;\n             background-color:#000000;\n         ")}},{key:"attach",value:function(e,t,r){if(e){var n=this.create_videoObject();(0,a.replace_node_with_prefix)(e,n,"rendertarget")&&(this.stop(),this._video=n,this.LOG.DEBUG("attach canvas rect:",e,e.clientWidth,e.clientHeight),this.yuvcanvas=new u.default({canvas:this._video,drawMode:this.drawmode,width:t||e.clientWidth,height:r||e.clientHeight,contextOptions:{preserveDrawingBuffer:!0}}))}else this.stop(),this._video=null,this.yuvcanvas&&(this.yuvcanvas.canvasElement=null,this.yuvcanvas=null)}},{key:"capture",value:function(){if(this._video){var e=document.createElement("canvas"),t=e.getContext("2d"),r=this._video;return e.width=720,e.height=576,t.drawImage(r,0,0,r.width,r.height,0,0,720,576),e}}},{key:"resize",value:function(e,t){this.yuvcanvas&&(this.yuvcanvas=new u.default({canvas:this.yuvcanvas.canvas,width:e,height:t}))}},{key:"fast_draw_i_frame_mode",set:function(e){e?(this._raw_videoframes=[],this._drop_until_wait_i=!0,this._raw_bufferd_framenum=1):(this._raw_videoframes=[],this._drop_until_wait_i=!0,this._raw_bufferd_framenum=10)}},{key:"delay",set:function(e){var t=Math.max(30,parseInt(1e3*e.normal/40,10));this._raw_bufferd_framenum=t}}]),e}();t.default=h,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(2)),i=o(r(3));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(t){if((0,n.default)(this,e),t=t||{},this.canvasElement=t.canvas,!this.canvasElement)throw new Error("can't create YUVCanvas instance,no provide canvas found!");this.contextOptions=t.contextOptions,this.type="yuv420",this.customYUV444=!1,this.conversionType=t.conversionType||"rec601",this.width=t.width||352,this.height=t.height||288,this.canvasElement.width=this.width,this.canvasElement.height=this.height,this.animationTime=t.animationTime||0,this.drawMode=t.drawMode||"WebGL",this.initContextGL(),this.contextGL&&(this.initProgram(),this.initBuffers(),this.initTextures()),this._tmpCanvas=document.createElement("canvas"),"yuv420"===this.type?this.drawNextOuptutPictureGL=function(e){var t=this.contextGL,r=this.texturePosBuffer,n=this.uTexturePosBuffer,i=this.vTexturePosBuffer,o=this.yTextureRef,a=this.uTextureRef,s=this.vTextureRef,u=e.yData,c=e.uData,f=e.vData,l=this.width,d=this.height,h=e.yDataPerRow||l,_=e.yRowCnt||d,v=e.uDataPerRow||l/2,p=e.uRowCnt||d/2,m=e.vDataPerRow||v,y=e.vRowCnt||p;t.viewport(0,0,l,d);var g=1,w=1,b=new Float32Array([w,0,0,0,w,g,0,g]);t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,b,t.DYNAMIC_DRAW),this.customYUV444&&(g=d/p,w=l/v);var x=new Float32Array([w,0,0,0,w,g,0,g]);t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,x,t.DYNAMIC_DRAW),this.customYUV444&&(g=d/y,w=l/m);var R=new Float32Array([w,0,0,0,w,g,0,g]);t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,R,t.DYNAMIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,o),t.texImage2D(t.TEXTURE_2D,0,t.LUMINANCE,h,_,0,t.LUMINANCE,t.UNSIGNED_BYTE,u),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,a),t.texImage2D(t.TEXTURE_2D,0,t.LUMINANCE,v,p,0,t.LUMINANCE,t.UNSIGNED_BYTE,c),t.activeTexture(t.TEXTURE2),t.bindTexture(t.TEXTURE_2D,s),t.texImage2D(t.TEXTURE_2D,0,t.LUMINANCE,m,y,0,t.LUMINANCE,t.UNSIGNED_BYTE,f),t.drawArrays(t.TRIANGLE_STRIP,0,4)}:"yuv422"===this.type&&(this.drawNextOuptutPictureGL=function(e){var t=this.contextGL,r=this.texturePosBuffer,n=this.textureRef,i=e.data,o=this.width,a=this.height,s=e.dataPerRow||2*o,u=e.rowCnt||a;t.viewport(0,0,o,a);var c=a/u,f=o/(s/2),l=new Float32Array([f,0,0,0,f,c,0,c]);t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,l,t.DYNAMIC_DRAW),t.uniform2f(t.getUniformLocation(this.shaderProgram,"resolution"),s,a),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,t.LUMINANCE,s,u,0,t.LUMINANCE,t.UNSIGNED_BYTE,i),t.drawArrays(t.TRIANGLE_STRIP,0,4)})}return(0,i.default)(e,[{key:"clear",value:function(){var e=this.contextGL;e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT)}},{key:"initContextGL",value:function(){for(var e=this.canvasElement,t=null,r=["webgl","experimental-webgl","moz-webgl","webkit-3d"],n=0;!t&&n<r.length;){var i=r[n];try{t=this.contextOptions?e.getContext(i,this.contextOptions):e.getContext(i)}catch(e){t=null}t&&"function"==typeof t.getParameter||(t=null),++n}this.contextGL=t,this.contextGL||console.error("WebGL init failed!")}},{key:"initProgram",value:function(){var e,t,r=this.contextGL;"yuv420"===this.type?(e=["attribute vec4 vertexPos;","attribute vec4 texturePos;","attribute vec4 uTexturePos;","attribute vec4 vTexturePos;","varying vec2 textureCoord;","varying vec2 uTextureCoord;","varying vec2 vTextureCoord;","void main()","{","  gl_Position = vertexPos;","  textureCoord = texturePos.xy;","  uTextureCoord = uTexturePos.xy;","  vTextureCoord = vTexturePos.xy;","}"].join("\n"),t=["precision highp float;","varying highp vec2 textureCoord;","varying highp vec2 uTextureCoord;","varying highp vec2 vTextureCoord;","uniform sampler2D ySampler;","uniform sampler2D uSampler;","uniform sampler2D vSampler;","uniform mat4 YUV2RGB;","void main(void) {","  highp float y = texture2D(ySampler,  textureCoord).r;","  highp float u = texture2D(uSampler,  uTextureCoord).r;","  highp float v = texture2D(vSampler,  vTextureCoord).r;","  gl_FragColor = vec4(y, u, v, 1) * YUV2RGB;","}"].join("\n")):"yuv422"===this.type&&(e=["attribute vec4 vertexPos;","attribute vec4 texturePos;","varying vec2 textureCoord;","void main()","{","  gl_Position = vertexPos;","  textureCoord = texturePos.xy;","}"].join("\n"),t=["precision highp float;","varying highp vec2 textureCoord;","uniform sampler2D sampler;","uniform highp vec2 resolution;","uniform mat4 YUV2RGB;","void main(void) {","  highp float texPixX = 1.0 / resolution.x;","  highp float logPixX = 2.0 / resolution.x;","  highp float logHalfPixX = 4.0 / resolution.x;","  highp float steps = floor(textureCoord.x / logPixX);","  highp float uvSteps = floor(textureCoord.x / logHalfPixX);","  highp float y = texture2D(sampler, vec2((logPixX * steps) + texPixX, textureCoord.y)).r;","  highp float u = texture2D(sampler, vec2((logHalfPixX * uvSteps), textureCoord.y)).r;","  highp float v = texture2D(sampler, vec2((logHalfPixX * uvSteps) + texPixX + texPixX, textureCoord.y)).r;","  gl_FragColor = vec4(y, u, v, 1.0) * YUV2RGB;","}"].join("\n"));var n=[];n="rec709"==this.conversionType?[1.16438,0,1.79274,-.97295,1.16438,-.21325,-.53291,.30148,1.16438,2.1124,0,-1.1334,0,0,0,1]:[1.16438,0,1.59603,-.87079,1.16438,-.39176,-.81297,.52959,1.16438,2.01723,0,-1.08139,0,0,0,1];var i=r.createShader(r.VERTEX_SHADER);r.shaderSource(i,e),r.compileShader(i),r.getShaderParameter(i,r.COMPILE_STATUS)||LOG.ERROR("Vertex shader failed to compile: "+r.getShaderInfoLog(i));var o=r.createShader(r.FRAGMENT_SHADER);r.shaderSource(o,t),r.compileShader(o),r.getShaderParameter(o,r.COMPILE_STATUS)||LOG.ERROR("Fragment shader failed to compile: "+r.getShaderInfoLog(o));var a=r.createProgram();r.attachShader(a,i),r.attachShader(a,o),r.linkProgram(a),r.getProgramParameter(a,r.LINK_STATUS)||LOG.ERROR("Program failed to compile: "+r.getProgramInfoLog(a)),r.useProgram(a);var s=r.getUniformLocation(a,"YUV2RGB");r.uniformMatrix4fv(s,!1,n),this.shaderProgram=a}},{key:"initBuffers",value:function(){var e=this.contextGL,t=this.shaderProgram,r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),e.STATIC_DRAW);var n=e.getAttribLocation(t,"vertexPos");if(e.enableVertexAttribArray(n),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0),this.animationTime){var i=this.animationTime,o=0;!function r(){var n=1*(o+=15)/i;o>=i?n=1:setTimeout(r,15);var a=-1*n,s=1*n,u=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,u),e.bufferData(e.ARRAY_BUFFER,new Float32Array([s,s,a,s,s,a,a,a]),e.STATIC_DRAW);var c=e.getAttribLocation(t,"vertexPos");e.enableVertexAttribArray(c),e.vertexAttribPointer(c,2,e.FLOAT,!1,0,0);try{e.drawArrays(e.TRIANGLE_STRIP,0,4)}catch(e){}}()}var a=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,a),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),e.STATIC_DRAW);var s=e.getAttribLocation(t,"texturePos");if(e.enableVertexAttribArray(s),e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0),this.texturePosBuffer=a,"yuv420"===this.type){var u=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,u),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),e.STATIC_DRAW);var c=e.getAttribLocation(t,"uTexturePos");e.enableVertexAttribArray(c),e.vertexAttribPointer(c,2,e.FLOAT,!1,0,0),this.uTexturePosBuffer=u;var f=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,f),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),e.STATIC_DRAW);var l=e.getAttribLocation(t,"vTexturePos");e.enableVertexAttribArray(l),e.vertexAttribPointer(l,2,e.FLOAT,!1,0,0),this.vTexturePosBuffer=f}}},{key:"initTextures",value:function(){var e=this.contextGL,t=this.shaderProgram;if("yuv420"===this.type){var r=this.initTexture(),n=e.getUniformLocation(t,"ySampler");e.uniform1i(n,0),this.yTextureRef=r;var i=this.initTexture(),o=e.getUniformLocation(t,"uSampler");e.uniform1i(o,1),this.uTextureRef=i;var a=this.initTexture(),s=e.getUniformLocation(t,"vSampler");e.uniform1i(s,2),this.vTextureRef=a}else if("yuv422"===this.type){var u=this.initTexture(),c=e.getUniformLocation(t,"sampler");e.uniform1i(c,0),this.textureRef=u}}},{key:"initTexture",value:function(){var e=this.contextGL,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,null),t}},{key:"drawNextOutputPicture",value:function(e){this.contextGL?this.drawNextOuptutPictureGL(e):this.drawNextOuptutPictureRGBA(e)}},{key:"drawNextOuptutPictureRGBA",value:function(e){var t=new ImageData(new Uint8ClampedArray(e.ar),e.w,e.h);this._tmpcanvas.width=t.width,this._tmpcanvas.height=t.height,this._tmpcanvas.getContext("2d").putImageData(t,0,0),this.canvasElement.drawImage(this._tmpcanvas,0,0,this.width,this.height)}},{key:"canvas",get:function(){return this.canvasElement}},{key:"DrawMode",get:function(){return this.drawMode}}]),e}();t.default=a,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=!1,t=!1,r=!0;self.Module={};try{importScripts(self.location.origin+"/static/worker/cvdecoder.js")}catch(t){e=!0}Module.onRuntimeInitialized=function(){self.VideoCodec=Module.VideoCodec,self.CVAVTrackDecoder=Module.CVAVTrackDecoder,n=new CVAVTrackDecoder,t=0==n.CreateDecodeContext(0);var e=0;self.ptr=0;var i=0;self.par_OnI420Decoded=function(t,r,n,o,a,s,u,c){var f=c!=s,l=f?c:s,d=new Uint8Array(l*u);d.set(new Uint8ClampedArray(Module.HEAPU8.buffer,t,d.byteLength));var h=new Uint8Array(l*u/4);h.set(new Uint8ClampedArray(Module.HEAPU8.buffer,r,h.byteLength));var _=new Uint8Array(l*u/4);if(_.set(new Uint8ClampedArray(Module.HEAPU8.buffer,n,_.byteLength)),f){for(var v=new ArrayBuffer(s*u),p=new DataView(v),m=new DataView(d.buffer),y=0;y<u;++y)for(var g=0;g<s;++g)p.setUint8(y*s+g,m.getUint8(y*l+g));d=new Uint8Array(v);for(var w=new ArrayBuffer(s*u/4),b=new DataView(w),x=new DataView(h.buffer),R=0;R<u/2;++R)for(var E=0;E<s/2;++E)b.setUint8(R*s/2+E,x.getUint8(R*l/2+E));h=new Uint8Array(w);for(var O=new ArrayBuffer(s*u/4),k=new DataView(O),U=new DataView(_.buffer),S=0;S<u/2;++S)for(var A=0;A<s/2;++A)k.setUint8(S*s/2+A,U.getUint8(S*l/2+A));_=new Uint8Array(O)}self.postMessage({type:"decoded_frame",w:s,h:u,yData:d.buffer,uData:h.buffer,vData:_.buffer,mode:"yuv",frameTime:a,frametype:o,decodeElapsed:performance.now()-i,maxRawFrameBytes:e},[d.buffer,h.buffer,_.buffer])},self.onmessage=function(o){var a=o.data;switch(a.type){case"RawFrame":if(!t)return;if(a.header.is_key_frame)r=!1;else if(r)return;i=performance.now();var s=o.data.ar;for((d=(c=new Uint8Array(s)).BYTES_PER_ELEMENT*c.length)>e&&(0!=e&&Module._free(self.ptr),self.ptr=Module._malloc(d),e=d),(f=new Uint8Array(Module.HEAPU8.buffer,self.ptr,d)).set(c);;){var u=n.decode_frame(f.byteOffset,!0);if(0==u)break;if(u<0)console.log("decode failed,reset decoder!",u),n.DestroyDecodeContext(),t=!1,n=new CVAVTrackDecoder,t=0==n.CreateDecodeContext(0),r=!0;else if(1==u)continue}break;case"Destory":t&&(n.delete(),e&&Module._free(self.ptr),t=!1),self.close();break;case"Audio2wav":var c,f,l=o.data.content,d=(c=new Uint8Array(l)).BYTES_PER_ELEMENT*c.length,h=Module._malloc(d);if((f=new Uint8Array(Module.HEAPU8.buffer,h,d)).set(c),0==Module.audio2wav(f.byteOffset,d)){var _=new Uint8Array(Module.getwavbytes());self.postMessage({type:"WavArrayBuffer",ab:_},[_.buffer])}Module._free(h)}},postMessage({type:"worker_decoder_resource_loaded_success",status:!0})};var n=null;e&&postMessage({type:"worker_decoder_resource_loaded_success",status:!1})},e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(r(14)),i=l(r(2)),o=l(r(3)),a=r(7),s=l(r(164)),u=l(r(1)),c=l(r(85)),f=l(r(165));function l(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(t){(0,i.default)(this,e),this.ob=t,this.LOG=u.default.LOG,t.rootElement||this.LOG.WARN("[remuxer]","not set rootElement, Attach it when you begin to use the player object!"),this._el=t.rootElement,this._video=null,this.render=null,this.duration_of_segment=40,this.delay_ctrl_vals={normal:.6},this.duration_adjust_val=0,this.worker=null,this.prefix="[remuxer]",this.reInitSegment=!0,this.reset()}return(0,o.default)(e,[{key:"load_webworker",value:function(){var e=this;return new n.default((function(t){e.ob.once("webworker_remuxer_res_init_ok",(function(r){t(r?e.worker:null)})),e.worker=new c.default(e.ob,f.default)}))}},{key:"destroy",value:function(){this.worker&&this.worker.terminate(),this.render&&(this.render.reset(),this.render.destroy(),this.render=null),this.worker=null,this._video=null}},{key:"check_timestamp",value:function(e){this.duration_of_segment!=e&&(this.duration_of_segment=e),this.ob.streaminfo.duration_calc.test_value(e)}},{key:"_process_worker_msg",value:function(e){switch(e.type){case"remuxed_fmp4_videoframe":this.ob.streaminfo.remuxElapsed_calc.test_value(e.remuxElapsed),this.ob.streaminfo.maxRawFrameBytes=e.maxRawFrameBytes,this.reInitSegment&&e.initSegment&&(this.reInitSegment=!1),this.render.input_data(e),this._isOperateOver=!0,this.feed_segments()}}},{key:"input_data",value:function(e){if(this._drop_until_wait_i){if(!e.header.is_key_frame)return void this.LOG.WARN("drop it",e.header.frameType,this._raw_videoframes.length);this._drop_until_wait_i=!1}e&&this._raw_videoframes.push(e)}},{key:"feed_segments",value:function(){var e=this;if(this._isOperateOver&&this.worker){var t=this._raw_videoframes.shift();if(t){this.render.delay<=.4*this.delay_ctrl_vals.normal||this.render.delay<=.8*this.delay_ctrl_vals.normal||this.render.delay<=this.delay_ctrl_vals.normal?this.duration_adjust_val=0:this.render.delay<=1.2*this.delay_ctrl_vals.normal?this.duration_adjust_val=-.5:this.render.delay<=1.5*this.delay_ctrl_vals.normal?this.duration_adjust_val=-1:this.render.delay<=2*this.delay_ctrl_vals.normal&&(this.duration_adjust_val=-2),this.render.delay>1?this.render.playrate=2:this.render.playrate=1;var r=this.duration_of_segment+this.duration_adjust_val;(r>60||r<20)&&(this.LOG.WARN(this.duration_of_segment,this.duration_adjust_val),r=40),t.header.is_key_frame&&this.ob.emit("remuxer_info",{remuxElapsed:{max:this.ob.streaminfo.remuxElapsed_calc.max,min:this.ob.streaminfo.remuxElapsed_calc.min,avr_v:this.ob.streaminfo.remuxElapsed_calc.get_avrvalue()},duration:{max:this.ob.streaminfo.duration_calc.max,min:this.ob.streaminfo.duration_calc.min,avr_v:this.ob.streaminfo.duration_calc.get_avrvalue()},maxRawFrameBytes:this.ob.streaminfo.maxRawFrameBytes,delay:this.render.delay,videoframes:this._raw_videoframes.length}),this.worker.dispatch({type:"VideoRawFrame",header:t.header,debug:0,duration:r,ar:t.payload,reInitSegment:this.reInitSegment},[t.payload]).then((function(t){e._process_worker_msg(t)})).catch((function(e){console.error(e)})),this._isOperateOver=!1}}}},{key:"_process_resolution_changed",value:function(){this.reset()}},{key:"_check_delay_and_try_drop",value:function(){}},{key:"start",value:function(){}},{key:"stop",value:function(){this.reset()}},{key:"reset",value:function(){this._raw_videoframes=[],this._isOperateOver=!0,this._drop_until_wait_i=!0,this.render&&this.render.reset(!0),this.reInitSegment=!0}},{key:"create_videoObject",value:function(){return this._video=(0,a.create_domnode_with_css)("video","rendertarget-"+this.ob.config.name,"\n            position:absolute;\n            left:0;\n            top:0;\n            right:0;\n            bottom:0;\n\n            z-index: 998;\n            background:black;\n            width:100%;\n            height:100%;\n            object-fit:fill;\n        ")}},{key:"attach",value:function(e){if(e){var t=this.create_videoObject();(0,a.replace_node_with_prefix)(e,t,"rendertarget")&&(this._video=t),this.stop(),this.render||(this.render=new s.default(this.ob)),this.render.attachMedia(this._video)}else this.stop(),this.render&&(this.render.destroy(),this.render=null),this._video=null}},{key:"capture",value:function(){if(this._video){var e=document.createElement("canvas"),t=e.getContext("2d"),r=this._video;return e.width=720,e.height=576,t.drawImage(r,0,0,r.videoWidth,r.videoHeight,0,0,720,576),e}}},{key:"resize",value:function(e,t){this._video&&(this._video.width=e,this._video.height=t)}},{key:"delay",set:function(e){var t=e.min,r=void 0===t?.1:t,n=e.normal,i=void 0===n?.5:n,o=e.max,a=void 0===o?1:o;i<.25&&(i=.25),this.delay_ctrl_vals={normal:i},this.LOG.WARN("[remuxer]","set delay  to",r,i,a)}}]),e}();t.default=d,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(2)),i=s(r(3)),o=s(r(1)),a=r(7);function s(e){return e&&e.__esModule?e:{default:e}}var u=0,c=1,f=2,l=3,d=4,h=5,_=function(){function e(t){if((0,n.default)(this,e),!t)throw new Error("CVMSERender constructor: invalid ob["+t+"]");this.mediaElement=null,this.mediaSource=null,this.datalist=[],this.wait_for_initsegment=!0,this.codecs="",this.ob=t,this._status_code=u,this.tmp_timestamp=0,this.updateCnt=0,this.LOG=o.default.LOG}return(0,i.default)(e,[{key:"attachMedia",value:function(e){e?(this.mediaElement,this.mediaElement=e,this._status_code=c):this.LOG.ERROR("[CVMSERender]","invalid Video!")}},{key:"Init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(0==e.length||!e.startsWith("video/mp4;"))return this.LOG.ERROR("[CVMSERender]","Invalid codec:["+e+"]!"),this._status_code=h,-1;if(!window.MediaSource||!window.MediaSource.isTypeSupported(e))return this.LOG.ERROR("[CVMSERender]","Unsupoorted codec:["+e+"]!"),this._status_code=h,-2;if(!this.mediaElement)return this.LOG.ERROR("[CVMSERender]","Invalid Atatched MediaElement(Video):"+this.mediaElement+" !"),-3;this.codecs=e;var t=function e(t){this.LOG.ERROR("[CVMSERender]",t),this.mediaElement.removeEventListener("error",e),this._status_code=d};this.remove_video_err_fn=(0,a.EventDisposer)(this.mediaElement,"error",t.bind(this)),this.remove_video_canplay_fn=(0,a.EventDisposer)(this.mediaElement,"canplay",function(){this.mediaElement.play()}.bind(this)),this.mediaSource=new window.MediaSource,this.url&&URL.revokeObjectURL(this.url),this.url=window.URL.createObjectURL(this.mediaSource),this.mediaElement.src=this.url,this.LOG.WARN("[CVMSERender]","video.error:",this.mediaElement.error,"video.readyState:",this.mediaElement.readyState),this.remove_mse_sourceopen=(0,a.EventDisposer)(this.mediaSource,"sourceopen",function(){this.LOG.DEBUG("[CVMSERender]","SourceBuffer open:",e),this.sourceBuffer=this.mediaSource.addSourceBuffer(e),this.sourceBuffer.addEventListener("error",(function(e){this.LOG.ERROR("[CVMSERender]",e)})),this.sourceBuffer.addEventListener("updateend",function(){var e=this.sourceBuffer.buffered;this.mediaElement.currentTime<e.start(e.length-1)&&(console.log("reset currentTime to",e.start(e.length-1)),this.mediaElement.currentTime=e.start(e.length-1)),this.updateCnt++,this.updateCnt>=100&&(this._clean_sourcebuffers(),this.updateCnt=0),this._feed_segments()}.bind(this));var t=this.datalist.findIndex((function(t){return 1==t.initSegment&&t.codec==e}));-1!=t&&this.datalist.splice(0,t),this._status_code=l,this.LOG.DEBUG("[CVMSERender]","Init MSE over"),this.ob.emit("decoder_readyfor_feeding","remuxer")}.bind(this));var r=function(){this.LOG.DEBUG("[CVMSERender]","source close"),this.mediaSource.removeEventListener("sourceclose",r),this.mediaSource.sourceBuffers.length&&(this.mediaSource.removeSourceBuffer(this.sourceBuffer),this.sourceBuffer=null),this._status_code=c}.bind(this);this.remove_mse_sourceclose=(0,a.EventDisposer)(this.mediaSource,"sourceclose",r);var n=function(){this.LOG.DEBUG("[CVMSERender]","source ended"),this.mediaSource.removeEventListener("sourceclose",n),this._status_code=c}.bind(this);return this.remove_mse_sourceended=(0,a.EventDisposer)(this.mediaSource,"sourceended",n),0}},{key:"_feed_segments",value:function(){if(this.mediaSource&&"open"==this.mediaSource.readyState&&this._status_code==l){if(this.sourceBuffer&&!this.sourceBuffer.updating){var e=this.datalist.shift();if(!e)return;if(this.wait_for_initsegment){if(!e.initSegment||e.codec!=this.codecs)return void this.LOG.DEBUG("[CVMSERender]","drop",e.initSegment,e.codec,e.pts);this.LOG.DEBUG("[CVMSERender]","got matched codec InitSegment!",e.initSegment,e.codec,e.pts),this.wait_for_initsegment=!1}if("open"==this.mediaSource.readyState)try{e.frameTime!=this.tmp_timestamp&&(this.tmp_timestamp=e.frameTime,this.ob.emit("player_current_utctime",{utctime:this.tmp_timestamp-this.delay})),this.sourceBuffer.appendBuffer(e.ar)}catch(t){this.datalist.unshift(e),this.LOG.ERROR("[CVMSERender]",t,"sourcebuffer append error!just reappend and try recover")}}}else this.LOG.WARN("[CVMSERender]",this._status_code)}},{key:"input_data",value:function(e){var t=e.codec,r=e.initSegment;if(t=e.codec='video/mp4; codecs="'+t+'"',this.mediaElement.error||this._status_code==d||this._status_code==u&&0==r)this.LOG.ERROR("[CVMSERender]","error ocurrs! "+this.mediaElement.error+"| "+this._status_code,r);else{if(this.codecs!=t&&1==r){if(this._status_code!=f?(this.LOG.WARN("[CVMSERender]","render detect coedc changed !",this.codecs,t),this._status_code=f):(this.LOG.WARN("[CVMSERender]","codec changed reset"),this.reset()),!r)return this._status_code=u,void this.LOG.ERROR("[CVMSERender]"," codec changed detect but this frame is invalid,because initSegment == 0!");try{this.Init(t)}catch(e){this.LOG.ERROR("[CVMSERender]",e),this._status_code=c}}this._status_code!=h&&(this.datalist.push(e),this._status_code==l&&this._feed_segments())}}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.datalist=[],this._status_code=e?u:c,this.codecs="",this.wait_for_initsegment=!0,this.tmp_timestamp=0;try{this.mediaSource&&"open"===this.mediaSource.readyState&&this.mediaSource.endOfStream()}catch(e){console.error("[mserender] reset",e)}this.mediaElement&&(this.mediaElement.removeAttribute("src"),this.mediaElement.load(),this.LOG.DEBUG("[CVMSERender]","stop at time:",this.mediaElement.currentTime,this.mediaElement.error,this.mediaElement.readyState))}},{key:"_clean_sourcebuffers",value:function(){var e=this.sourceBuffer.buffered;if(e.length&&!this.sourceBuffer.updating){var t=this.mediaElement.currentTime,r=e.start(e.length-1),n=e.end(e.length-1),i=n-4;if(i>0&&n-r>4&&t>r&&t>i)try{this.sourceBuffer.remove(r,i)}catch(e){console.log("Remove media segments",r,i),console.log("Failed to cleanup buffer",e)}}}},{key:"destroy",value:function(){this.reset(!0),this.url&&URL.revokeObjectURL(this.url),this.remove_mse_sourceclose&&this.remove_mse_sourceclose(),this.remove_mse_sourceopen&&this.remove_mse_sourceopen(),this.remove_video_canplay_fn&&this.remove_video_canplay_fn(),this.remove_video_err_fn&&this.remove_video_err_fn(),this.remove_mse_sourceended&&this.remove_mse_sourceended(),this.mediaElement=null,this.mediaSource=null}},{key:"delay",get:function(){return this._status_code==l&&this.mediaElement&&this.mediaElement.played&&this.mediaElement.buffered&&this.mediaElement.played.length&&this.mediaElement.buffered.length?this.mediaElement.buffered.end(this.mediaElement.buffered.length-1)-this.mediaElement.currentTime:0}},{key:"playrate",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.mediaElement&&this.mediaElement.playbackRate&&e>0&&(this.mediaElement.playbackRate=e)},get:function(){return this.mediaElement&&this.mediaElement.playbackRate?this.mediaElement.playbackRate:1}}]),e}();t.default=_,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=!1;self.Module={};try{importScripts(self.location.origin+"/static/worker/cvremuxer.js")}catch(t){e=!0}Module.onRuntimeInitialized=function(){var e=null,t=0,r=0,n=0;self.CVStreamTransmuxer=Module.CVStreamTransmuxer,self.par_OnFMp4VideoData=function(e,r,i,o,a,s,u){var c=new Uint8Array(o);c.set(new Uint8ClampedArray(Module.HEAPU8.buffer,i,c.byteLength)),self.postMessage({type:"remuxed_fmp4_videoframe",frameTime:s,frameType:a,initSegment:e,codec:r,pts:u,ar:c.buffer,remuxElapsed:performance.now()-n,maxRawFrameBytes:t},[c.buffer])},self.onmessage=function(i){var o=i.data;if("VideoRawFrame"==o.type){var a=o.ar,s=o.duration;(s<0||s>50)&&console.error(s),o.reInitSegment&&(e&&(e.delete(),e=null),e=new CVStreamTransmuxer(o.debug||0)),n=performance.now();var u=new Uint8Array(a),c=u.BYTES_PER_ELEMENT*u.length;t<c&&(0!=t&&(console.warn("free",t,r),Module._free(r),r=0),console.warn("malloc",r,c),r=Module._malloc(c),t=c);var f=new Uint8Array(Module.HEAPU8.buffer,r,c);f.set(u),e.transmux_frame(f.byteOffset,s,o.reInitSegment)}else"Destory"==o.type&&(e.delete(),e=null,0!=r&&(Module._free(r),r=0),self.postMessage({type:"Destroy"}),self.close())},postMessage({type:"worker_remuxer_resource_loaded_success",status:!0})},e&&postMessage({type:"worker_remuxer_resource_loaded_success",status:!1})},e.exports=t.default},function(e,t,r){"use strict";var n=s(r(167)),i=s(r(1)),o=s(r(86)),a=r(7);function s(e){return e&&e.__esModule?e:{default:e}}i.default.install("audio-decoder",(function(){var e=this,t=this;i.default.LOG;(0,a.safe_setproperty)(this,"audio_decoder",new o.default);var r=function(t){t.header;var r=t.chunk;t.recv;e.audio_decoder.input_g711udata(r.slice(36))};t.on("ws_data_incoming_audio",r);var s=function(){e.audio_decoder.stop()};t.on("abort_request",s),t.get_volumne=function(){return e.audio_decoder.volumne},t.set_volumne=function(t){t=parseFloat(t),(0,n.default)(t,NaN)||(t<0?t=0:t>1&&(t=1),e.audio_decoder.volumne=t,e.emit("player_status_msg",{voice_status:0!=t}))};t.on("destroy",(function n(){e.audio_decoder.stop(),e.audio_decoder.destroy(),e.audio_decoder=null,t.off("ws_data_incoming_audio",r),t.off("abort_request",s),t.off("destroy",n)}))}),[])},function(e,t,r){e.exports={default:r(168),__esModule:!0}},function(e,t,r){r(169),e.exports=r(0).Object.is},function(e,t,r){var n=r(5);n(n.S,"Object",{is:r(170)})},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(172)),i=a(r(2)),o=a(r(3));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t){(0,i.default)(this,e),this.init(t)}return(0,o.default)(e,[{key:"init",value:function(e){this.option=(0,n.default)({},{encoding:"16bitInt",channels:1,sampleRate:8e3,flushingTime:320},e),this.samples=new Float32Array,this.flush=this.flush.bind(this),this.bufferedTime=0,this.maxValue=this.getMaxValue(),this.typedArray=this.getTypedArray(),this.createContext()}},{key:"getMaxValue",value:function(){var e={"8bitInt":128,"16bitInt":32768,"32bitInt":2147483648,"32bitFloat":1};return e[this.option.encoding]?e[this.option.encoding]:e["16bitInt"]}},{key:"getTypedArray",value:function(){var e={"8bitInt":Int8Array,"16bitInt":Int16Array,"32bitInt":Int32Array,"32bitFloat":Float32Array};return e[this.option.encoding]?e[this.option.encoding]:e["16bitInt"]}},{key:"createContext",value:function(){this.audioCtx=new(window.AudioContext||window.webkitAudioContext),this.gainNode=this.audioCtx.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioCtx.destination),this.startTime=this.audioCtx.currentTime}},{key:"isTypedArray",value:function(e){return e.byteLength&&e.buffer&&e.buffer.constructor==ArrayBuffer}},{key:"feed",value:function(e){if(this.isTypedArray(e)){this.bufferedTime+=40,e=this.getFormatedValue(e);var t=new Float32Array(this.samples.length+e.length);t.set(this.samples,0),t.set(e,this.samples.length),this.samples=t,this.flush()}}},{key:"getFormatedValue",value:function(e){e=new this.typedArray(e.buffer);var t=new Float32Array(e.length),r=void 0;for(r=0;r<e.length;r++)t[r]=e[r]/this.maxValue;return t}},{key:"destroy",value:function(){this.interval&&clearInterval(this.interval),this.samples=null,this.audioCtx.close(),this.audioCtx=null}},{key:"flush",value:function(){if(this.samples.length&&!(this.bufferedTime<this.option.flushingTime)){this.bufferedTime=0;var e=this.audioCtx.createBufferSource(),t=this.samples.length/this.option.channels,r=this.audioCtx.createBuffer(this.option.channels,t,this.option.sampleRate),n=void 0,i=void 0,o=void 0,a=void 0,s=void 0;for(i=0;i<this.option.channels;i++)for(n=r.getChannelData(i),o=i,s=50,a=0;a<t;a++)n[a]=this.samples[o],a<50&&(n[a]=n[a]*a/50),a>=t-51&&(n[a]=n[a]*s--/50),o+=this.option.channels;this.startTime<this.audioCtx.currentTime&&(this.startTime=this.audioCtx.currentTime),e.buffer=r,e.connect(this.gainNode),e.start(this.startTime),this.startTime+=r.duration,this.samples=new Float32Array}}},{key:"volumne",get:function(){return this.gainNode.gain.value},set:function(e){this.gainNode.gain.value=e}}]),e}();t.default=s,e.exports=t.default},function(e,t,r){e.exports={default:r(173),__esModule:!0}},function(e,t,r){r(174),e.exports=r(0).Object.assign},function(e,t,r){var n=r(5);n(n.S+n.F,"Object",{assign:r(175)})},function(e,t,r){"use strict";var n=r(9),i=r(20),o=r(51),a=r(34),s=r(17),u=r(37),c=Object.assign;e.exports=!c||r(16)((function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach((function(e){t[e]=e})),7!=c({},e)[r]||Object.keys(c({},t)).join("")!=n}))?function(e,t){for(var r=s(e),c=arguments.length,f=1,l=o.f,d=a.f;c>f;)for(var h,_=u(arguments[f++]),v=l?i(_).concat(l(_)):i(_),p=v.length,m=0;p>m;)h=v[m++],n&&!d.call(_,h)||(r[h]=_[h]);return r}:c},function(e,t,r){"use strict";var n=s(r(28)),i=s(r(1)),o=r(7),a=s(r(177));function s(e){return e&&e.__esModule?e:{default:e}}i.default.install("smart-parser",(function(){var e=this,t=this,r=i.default.LOG;if(this.config.use_smart){(0,o.safe_setproperty)(this,"smartdecoder",new a.default(this));var s=function(t){var r=t.header,n=t.chunk;e.smartdecoder.input_rawbytes(r,n)};t.on("ws_data_incoming_smart",s),t.get_smartconfig=function(){return{rule:e.smartdecoder._enable_smartrule,result:e.smartdecoder._enable_smartresult,enbale_faceonly:e.smartdecoder._startegy_faceonly,draw_extrainfo:e.smartdecoder._draw_extrainfo}},t.set_smartconfig=function(t){r.WARN((0,n.default)(t)),t.hasOwnProperty("rule")&&(e.smartdecoder._enable_smartrule=t.rule),t.hasOwnProperty("result")&&(e.smartdecoder._enable_smartresult=t.result),t.hasOwnProperty("enbale_faceonly")&&(e.smartdecoder._startegy_faceonly=t.enbale_faceonly),t.hasOwnProperty("draw_extrainfo")&&(e.smartdecoder._draw_extrainfo=t.draw_extrainfo)};var u=function(t){e.smartdecoder&&e.smartdecoder.attach(t)};t.on("smartdecoder_attach",u);var c=function(){e.smartdecoder&&e.smartdecoder.stop()};t.on("abort_request",c);var f=function(){e.smartdecoder&&e.smartdecoder.start()};t.on("open_request",f);var l=function(t){var r=t.show;e.smartdecoder.drop_everthing=!r};t.on("player_activate_status_changed",l),t.get_tempmaparea=function(){return e.smartdecoder.tempMapArea},t.set_tempmaparea=function(t){r.WARN((0,n.default)(t)),e.smartdecoder.tempMapArea=t};t.on("destroy",(function r(){t.off("ws_data_incoming_smart",s),t.off("smartdecoder_attach",u),t.off("abort_request",c),t.off("open_request",f),t.off("player_activate_status_changed",l),e.smartdecoder.stop(),e.smartdecoder.destroy(),e.smartdecoder=null,t.off("destroy",r)}))}else r.WARN("禁用smartparser!!")}),["ws-loader"])},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=y(r(57)),i=y(r(58)),o=y(r(28)),a=y(r(59)),s=y(r(24)),u=y(r(60)),c=y(r(2)),f=y(r(3)),l=y(r(1)),d=y(r(84)),h=r(197),_=r(61),v=r(207),p=y(r(208)),m=y(r(78));function y(e){return e&&e.__esModule?e:{default:e}}var g=function(){function e(t){(0,c.default)(this,e),this._ob=t,this.LOG=l.default.LOG,this._mask=null,this._drawCtx=new d.default("smart",25),this._rules_map=new u.default,this._results_map=new u.default,this.canvas_s=null,this._enable_smartresult=!1,this._enable_smartrule=!1,this._startegy_faceonly=!1,this._draw_extrainfo=!1,this.drop_everything=!1,this._decoder=new p.default,this.bind_dealers(),this.tempMapArea=null,this._hasStart=!1}var t;return(0,f.default)(e,[{key:"bind_dealers",value:function(){this._rules_map.set(1,new h.BaseRule(_.COLOR.GREEN,75)),this._rules_map.set(2,new h.BaseRule(_.COLOR.GREEN,75)),this._rules_map.set(3,new h.BaseRule(_.COLOR.GREEN,75)),this._rules_map.set(4,new h.BaseRule(_.COLOR.GREEN,75)),this._rules_map.set(7,new h.BaseRule(_.COLOR.GREEN,75)),this._rules_map.set(12,new h.BaseRule(_.COLOR.GREEN,75)),this._rules_map.set(13,new h.BaseRule(_.COLOR.GREEN,75)),this._rules_map.set(14,new h.BaseRule(_.COLOR.GREEN,75)),this._rules_map.set(15,new h.BaseRule(_.COLOR.GREEN,75)),this._rules_map.set(19,new h.BaseRule(_.COLOR.GREEN,75)),this._rules_map.set(20,new h.BaseRule(_.COLOR.GREEN,75)),this._rules_map.set(21,new h.BaseRule(_.COLOR.GREEN,75)),this._rules_map.set(22,new h.BaseRule(_.COLOR.GREEN,75)),this._results_map.set(1,new v.BaseResult(_.COLOR.RED,20)),this._results_map.set(2,new v.BaseResult(_.COLOR.BLUE,5)),this._results_map.set(3,new v.BaseResult(_.COLOR.BLUE,5)),this._results_map.set(4,new v.BaseResult(_.COLOR.BLUE,5)),this._results_map.set(7,new v.FaceResult(_.COLOR.BLUE,5)),this._results_map.set(8,new v.BaseResult(_.COLOR.BLUE,5)),this._results_map.set(12,new v.BaseResult(_.COLOR.BLUE,5)),this._results_map.set(13,new v.BaseResult(_.COLOR.BLUE,5)),this._results_map.set(14,new v.BaseResult(_.COLOR.BLUE,5)),this._results_map.set(15,new v.BaseResult(_.COLOR.BLUE,5)),this._results_map.set(18,new v.BaseResult(_.COLOR.BLUE,5)),this._results_map.set(19,new v.BaseResult(_.COLOR.BLUE,5)),this._results_map.set(20,new v.BaseResult(_.COLOR.BLUE,5)),this._results_map.set(21,new v.BaseResult(_.COLOR.BLUE,5)),this._results_map.set(22,new v.BaseResult(_.COLOR.BLUE,5)),this._results_map.set(23,new v.DomeTrackResult(_.COLOR.BLUE,5))}},{key:"set_smart_rule",value:function(e){if(!this._startegy_faceonly&&this._mask&&this._enable_smartrule)try{if(e.frameData.length>0){var t=!0,r=!1,n=void 0;try{for(var i,o=(0,s.default)(e.frameData);!(t=(i=o.next()).done);t=!0){var a=i.value;this._rules_map.has(a.smart_type)?this._rules_map.get(a.smart_type).set(a):this.LOG.ERROR("not supported type rule: "+a.smart_type)}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}}}catch(e){this.LOG.ERROR(e)}}},{key:"set_smart_result",value:function(e){if(this._mask&&this._enable_smartresult&&e.frameData.length>0){var t=!0,r=!1,n=void 0;try{for(var i,o=(0,s.default)(e.frameData);!(t=(i=o.next()).done);t=!0){var a=i.value;if(!this._startegy_faceonly||7==a.smart_type)if(this._results_map.has(a.smart_type)){this._results_map.get(a.smart_type).set(a,e.header.frameTimestamp);try{this._rules_map.has(a.smart_type)&&(1==a.smart_type?this._rules_map.get(a.smart_type).set_blink_flag(a.node_id,!!a.is_need_alarm):this._rules_map.get(a.smart_type).set_blink_flag(a.node_id,!0))}catch(e){this.LOG.ERROR(e)}}else this.LOG.ERROR("not supported type result: "+a.smart_type)}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}}}},{key:"start",value:function(){this._drawCtx.set_workcb((0,m.default)(this._draw.bind(this),40)),this._drawCtx.start(),this.drop_everything=!1}},{key:"input_rawbytes",value:(t=(0,a.default)(i.default.mark((function e(t,r){var n,a,u,c,f,l,d,h,_,v,p,m,y,g,w,b,x;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._mask&&!this.drop_everything){e.next=2;break}return e.abrupt("return");case 2:this._hasStart||(this.start(),this._hasStart=!0),n=performance.now(),a=new DataView(r),u=t.frameType,c=36,f=[],l=0;case 9:if(!(l<t.smart.ivs_node_num)){e.next=38;break}if(d=this._decoder.decode_node(a,c)){e.next=13;break}return e.abrupt("continue",35);case 13:if(c+=20,h=void 0,7!=d.type||28!=u){e.next=21;break}return e.next=18,this._decoder.ivs_face_result(a,c);case 18:h=e.sent,e.next=28;break;case 21:if(9!=d.type||28!=u){e.next=27;break}return e.next=24,this._decoder.ivs_plate_result(a,c);case 24:h=e.sent,e.next=28;break;case 27:h=this._decoder.decode_data(u,d.type,d.version,a,c);case 28:if(c+=d.datalen,"{}"!=(0,o.default)(h)||19==d.type){e.next=31;break}return e.abrupt("continue",35);case 31:h.smart_type=d.type,h.node_id=d.id,h.node_version=d.version,f.push(h);case 35:l++,e.next=9;break;case 38:if(_=performance.now(),!t.is_smart_i){e.next=43;break}this.set_smart_rule({header:t,frameData:f,decoded_end:_-n}),e.next=67;break;case 43:if(v=[],p=[],!(f.length>0)){e.next=67;break}for(m=!0,y=!1,g=void 0,e.prev=49,w=(0,s.default)(f);!(m=(b=w.next()).done);m=!0)201==(x=b.value).node_version&&7==x.smart_type?v.push(x):p.push(x);e.next=57;break;case 53:e.prev=53,e.t0=e.catch(49),y=!0,g=e.t0;case 57:e.prev=57,e.prev=58,!m&&w.return&&w.return();case 60:if(e.prev=60,!y){e.next=63;break}throw g;case 63:return e.finish(60);case 64:return e.finish(57);case 65:v.length>0&&this._ob.emit("parsed_smartframe_facecomparison_result",{header:t,frameData:v,name:this._ob.config.name,uid:this._ob.uid}),this.set_smart_result({header:t,frameData:p});case 67:case"end":return e.stop()}}),e,this,[[49,53,57,65],[58,,60,64]])}))),function(e,r){return t.apply(this,arguments)})},{key:"stop",value:function(){this._drawCtx.set_workcb(null),this._drawCtx.stop(),this.canvas_s&&this.canvas_s.Restore(),this._hasStart=!1,this.drop_everything=!0}},{key:"destroy",value:function(){this.stop(),this._decoder=null,this._results_map=null,this._rules_map=null,this._mask=null,this.canvas_s&&(this.canvas_s.Destroy(),this.canvas_s=null)}},{key:"_draw",value:function(){if(this.canvas_s&&!this.drop_everything){this.canvas_s.Restore();var e=!0,t=!1,r=void 0;try{for(var i,o=(0,s.default)(this._rules_map);!(e=(i=o.next()).done);e=!0){var a=i.value,u=(0,n.default)(a,2);u[0];u[1].draw()}}catch(e){t=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw r}}var c=!0,f=!1,l=void 0;try{for(var d,h=(0,s.default)(this._results_map);!(c=(d=h.next()).done);c=!0){var _=d.value,v=(0,n.default)(_,2);v[0];v[1].draw({draw_extrainfo:this._draw_extrainfo})}}catch(e){f=!0,l=e}finally{try{!c&&h.return&&h.return()}finally{if(f)throw l}}this.tempMapArea&&this.canvas_s.DrawTempMapArea&&this.canvas_s.DrawTempMapArea(this.tempMapArea)}}},{key:"attach",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"smart";if(e){if(this.LOG.WARN("[smart]","mask:{w:"+e.clientWidth+" h:"+e.clientHeight+"},if w == h == 0,that means a fault just happened and you see nothing smart rules/results!"),e.clientWidth>0&&e.clientHeight>0)if(this._mask=e,this.stop(),"smart"==t){this.canvas_s=new CVCanvasDraw.SmartRuleAndResultShow(this._mask.clientWidth,this._mask.clientHeight,this._mask),this.canvas_s.bgColor="rgba(0,0,0,0)",this.canvas_s.Init();var r=!0,i=!1,o=void 0;try{for(var a,u=(0,s.default)(this._rules_map);!(r=(a=u.next()).done);r=!0){var c=a.value,f=(0,n.default)(c,2),l=(f[0],f[1]);l.attach(this.canvas_s)}}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}var d=!0,h=!1,_=void 0;try{for(var v,p=(0,s.default)(this._results_map);!(d=(v=p.next()).done);d=!0){var m=v.value,y=(0,n.default)(m,2),g=(y[0],y[1]);g.attach(this.canvas_s)}}catch(e){h=!0,_=e}finally{try{!d&&p.return&&p.return()}finally{if(h)throw _}}}else"3dposition"==t&&(this.canvas_s=new CVCanvasDraw.Live3d_PrivacyMask(this._mask.clientWidth,this._mask.clientHeight,this._mask,this._ob),this.canvas_s.bgColor="rgba(0,0,0,0)",this.canvas_s.Init())}else this._mask=null,this.stop(),this.canvas_s&&(this.canvas_s.Destroy(),this.canvas_s=null)}},{key:"ready",get:function(){return!0}}]),e}();t.default=g,e.exports=t.default},function(e,t,r){e.exports={default:r(179),__esModule:!0}},function(e,t,r){r(25),r(27),e.exports=r(180)},function(e,t,r){var n=r(33),i=r(6)("iterator"),o=r(19);e.exports=r(0).isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||o.hasOwnProperty(n(t))}},function(e,t,r){var n=function(){return this}()||Function("return this")(),i=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,o=i&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,e.exports=r(182),i)n.regeneratorRuntime=o;else try{delete n.regeneratorRuntime}catch(e){n.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";var r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag",u="object"==typeof e,c=t.regeneratorRuntime;if(c)u&&(e.exports=c);else{(c=t.regeneratorRuntime=u?e.exports:{}).wrap=v;var f={},l={};l[o]=function(){return this};var d=Object.getPrototypeOf,h=d&&d(d(k([])));h&&h!==r&&n.call(h,o)&&(l=h);var _=g.prototype=m.prototype=Object.create(l);y.prototype=_.constructor=g,g.constructor=y,g[s]=y.displayName="GeneratorFunction",c.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},c.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(_),e},c.awrap=function(e){return{__await:e}},w(b.prototype),b.prototype[a]=function(){return this},c.AsyncIterator=b,c.async=function(e,t,r,n){var i=new b(v(e,t,r,n));return c.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(_),_[s]="Generator",_[o]=function(){return this},_.toString=function(){return"[object Generator]"},c.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},c.values=k,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;E(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:k(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}}}function v(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,o=Object.create(i.prototype),a=new O(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return U()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=x(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=p(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,a),o}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function m(){}function y(){}function g(){}function w(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function b(e){var t;this._invoke=function(r,i){function o(){return new Promise((function(t,o){!function t(r,i,o,a){var s=p(e[r],e,i);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&n.call(c,"__await")?Promise.resolve(c.__await).then((function(e){t("next",e,o,a)}),(function(e){t("throw",e,o,a)})):Promise.resolve(c).then((function(e){u.value=e,o(u)}),a)}a(s.arg)}(r,i,t,o)}))}return t=t?t.then(o,o):o()}}function x(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=p(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,f;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:U}}function U(){return{value:void 0,done:!0}}}(function(){return this}()||Function("return this")())},function(e,t,r){r(52),r(27),r(25),r(184),r(190),r(193),r(195),e.exports=r(0).Map},function(e,t,r){"use strict";var n=r(185),i=r(88);e.exports=r(186)("Map",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=n.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return n.def(i(this,"Map"),0===e?0:e,t)}},n,!0)},function(e,t,r){"use strict";var n=r(10).f,i=r(32),o=r(56),a=r(12),s=r(54),u=r(29),c=r(46),f=r(67),l=r(83),d=r(9),h=r(49).fastKey,_=r(88),v=d?"_s":"size",p=function(e,t){var r,n=h(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,c){var f=e((function(e,n){s(e,f,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[v]=0,null!=n&&u(n,r,e[c],e)}));return o(f.prototype,{clear:function(){for(var e=_(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var r=_(this,t),n=p(r,e);if(n){var i=n.n,o=n.p;delete r._i[n.i],n.r=!0,o&&(o.n=i),i&&(i.p=o),r._f==n&&(r._f=i),r._l==n&&(r._l=o),r[v]--}return!!n},forEach:function(e){_(this,t);for(var r,n=a(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!p(_(this,t),e)}}),d&&n(f.prototype,"size",{get:function(){return _(this,t)[v]}}),f},def:function(e,t,r){var n,i,o=p(e,t);return o?o.v=r:(e._l=o={i:i=h(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=o),n&&(n.n=o),e[v]++,"F"!==i&&(e._i[i]=o)),e},getEntry:p,setStrong:function(e,t,r){c(e,t,(function(e,r){this._t=_(e,t),this._k=r,this._l=void 0}),(function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?f(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,f(1))}),r?"entries":"values",!r,!0),l(t)}}},function(e,t,r){"use strict";var n=r(4),i=r(5),o=r(49),a=r(16),s=r(13),u=r(56),c=r(29),f=r(54),l=r(8),d=r(26),h=r(10).f,_=r(187)(0),v=r(9);e.exports=function(e,t,r,p,m,y){var g=n[e],w=g,b=m?"set":"add",x=w&&w.prototype,R={};return v&&"function"==typeof w&&(y||x.forEach&&!a((function(){(new w).entries().next()})))?(w=t((function(t,r){f(t,w,e,"_c"),t._c=new g,null!=r&&c(r,m,t[b],t)})),_("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),(function(e){var t="add"==e||"set"==e;!(e in x)||y&&"clear"==e||s(w.prototype,e,(function(r,n){if(f(this,w,e),!t&&y&&!l(r))return"get"==e&&void 0;var i=this._c[e](0===r?0:r,n);return t?this:i}))})),y||h(w.prototype,"size",{get:function(){return this._c.size}})):(w=p.getConstructor(t,e,m,b),u(w.prototype,r),o.NEED=!0),d(w,e),R[e]=w,i(i.G+i.W+i.F,R),y||p.setStrong(w,e,m),w}},function(e,t,r){var n=r(12),i=r(37),o=r(17),a=r(38),s=r(188);e.exports=function(e,t){var r=1==e,u=2==e,c=3==e,f=4==e,l=6==e,d=5==e||l,h=t||s;return function(t,s,_){for(var v,p,m=o(t),y=i(m),g=n(s,_,3),w=a(y.length),b=0,x=r?h(t,w):u?h(t,0):void 0;w>b;b++)if((d||b in y)&&(p=g(v=y[b],b,m),e))if(r)x[b]=p;else if(p)switch(e){case 3:return!0;case 5:return v;case 6:return b;case 2:x.push(v)}else if(f)return!1;return l?-1:c||f?f:x}}},function(e,t,r){var n=r(189);e.exports=function(e,t){return new(n(e))(t)}},function(e,t,r){var n=r(8),i=r(72),o=r(6)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),n(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,r){var n=r(5);n(n.P+n.R,"Map",{toJSON:r(191)("Map")})},function(e,t,r){var n=r(33),i=r(192);e.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,r){var n=r(29);e.exports=function(e,t){var r=[];return n(e,!1,r.push,r,t),r}},function(e,t,r){r(194)("Map")},function(e,t,r){"use strict";var n=r(5);e.exports=function(e){n(n.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,r){r(196)("Map")},function(e,t,r){"use strict";var n=r(5),i=r(23),o=r(12),a=r(29);e.exports=function(e){n(n.S,e,{from:function(e){var t,r,n,s,u=arguments[1];return i(this),(t=void 0!==u)&&i(u),null==e?new this:(r=[],t?(n=0,s=o(u,arguments[2],2),a(e,!1,(function(e){r.push(s(e,n++))}))):a(e,!1,r.push,r),new this(r))}})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegionRule=t.WireRule=t.CounterRule=t.BaseRule=void 0;var n=d(r(89)),i=d(r(90)),o=d(r(91)),a=d(r(24)),s=d(r(57)),u=d(r(60)),c=d(r(2)),f=d(r(3)),l=r(61);function d(e){return e&&e.__esModule?e:{default:e}}var h=t.BaseRule=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.COLOR.GREEN,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25;(0,c.default)(this,e),this._draw_color=t,this._clear_delay=r,this._data_map=new u.default,this._renderMask=null}return(0,f.default)(e,[{key:"set_blink_flag",value:function(e,t){if(this._data_map.has(e)){var r=this._data_map.get(e);r.blink_tid&&(clearTimeout(r.blink_tid),r.blink_tid=0),t&&(r.blink_tid=setTimeout((function(){r.blink_flg=!1,r.last_blink_st=0}),500)),r.blink_flg=t}}},{key:"set",value:function(e){this._data_map.set(e.node_id,{tid:0,nodeData:e,blink_color:[l.COLOR.RED,this._draw_color],rever_cnt:1,blink_tid:0,blink_flg:!1})}},{key:"draw",value:function(){var e=this;if(this._renderMask){var t=[],r=[],n=!0,i=!1,o=void 0;try{for(var u,c=(0,a.default)(this._data_map);!(n=(u=c.next()).done);n=!0){var f=u.value,l=(0,s.default)(f,2),d=(l[0],l[1]),h=this._draw_color;d.blink_flg&&(d.rever_cnt++%30==0&&(d.blink_color.push(d.blink_color.shift()),d.rever_cnt=1),h=d.blink_color[0]),d.nodeData.draw_color=h,d.tid<this._clear_delay?(t.push(d.nodeData),d.tid++):r.push(d.nodeData.node_id)}}catch(e){i=!0,o=e}finally{try{!n&&c.return&&c.return()}finally{if(i)throw o}}t.length&&this._renderMask.DrawSmart(t,this._draw_color),r.forEach((function(t){e._data_map.delete(t)}))}}},{key:"attach",value:function(e){this._renderMask=e}}]),e}();t.CounterRule=function(e){function t(e){var r=e.draw_color,o=void 0===r?l.COLOR.GREEN:r,a=e.clear_delay,s=void 0===a?1100:a;return(0,c.default)(this,t),(0,i.default)(this,(t.__proto__||(0,n.default)(t)).call(this,o,s))}return(0,o.default)(t,e),t}(h),t.WireRule=function(e){function t(e){var r=e.draw_color,o=void 0===r?l.COLOR.GREEN:r,a=e.clear_delay,s=void 0===a?1100:a;return(0,c.default)(this,t),(0,i.default)(this,(t.__proto__||(0,n.default)(t)).call(this,o,s))}return(0,o.default)(t,e),t}(h),t.RegionRule=function(e){function t(e){var r=e.draw_color,o=void 0===r?l.COLOR.GREEN:r,a=e.clear_delay,s=void 0===a?1100:a;return(0,c.default)(this,t),(0,i.default)(this,(t.__proto__||(0,n.default)(t)).call(this,o,s))}return(0,o.default)(t,e),(0,f.default)(t,[{key:"draw",value:function(){}}]),t}(h)},function(e,t,r){r(199),e.exports=r(0).Object.getPrototypeOf},function(e,t,r){var n=r(17),i=r(70);r(63)("getPrototypeOf",(function(){return function(e){return i(n(e))}}))},function(e,t,r){e.exports={default:r(201),__esModule:!0}},function(e,t,r){r(202),e.exports=r(0).Object.setPrototypeOf},function(e,t,r){var n=r(5);n(n.S,"Object",{setPrototypeOf:r(203).set})},function(e,t,r){var n=r(8),i=r(11),o=function(e,t){if(i(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{(n=r(12)(Function.call,r(74).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return o(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:o}},function(e,t,r){e.exports={default:r(205),__esModule:!0}},function(e,t,r){r(206);var n=r(0).Object;e.exports=function(e,t){return n.create(e,t)}},function(e,t,r){var n=r(5);n(n.S,"Object",{create:r(32)})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FaceResult=t.DomeTrackResult=t.BaseResult=void 0;var n=h(r(28)),i=h(r(89)),o=h(r(90)),a=h(r(91)),s=h(r(24)),u=h(r(57)),c=h(r(60)),f=h(r(2)),l=h(r(3)),d=r(61);function h(e){return e&&e.__esModule?e:{default:e}}var _=t.BaseResult=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.COLOR.BLUE,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;(0,f.default)(this,e),this._draw_color=t,this._clear_delay=r,this._data_map=new c.default,this._renderMask=null}return(0,l.default)(e,[{key:"set",value:function(e){Array.isArray(e)&&this._data_map.set(e.node_id,{nodeData:e,show_cnt:0})}},{key:"draw",value:function(){var e=this;if(this._renderMask){var t=[],r=[],n=!0,i=!1,o=void 0;try{for(var a,c=(0,s.default)(this._data_map);!(n=(a=c.next()).done);n=!0){var f=a.value,l=(0,u.default)(f,2),d=l[0],h=l[1];if(h.show_cnt>this._clear_delay)r.push(d);else{h.show_cnt++;var _=!0,v=!1,p=void 0;try{for(var m,y=(0,s.default)(h.nodeData);!(_=(m=y.next()).done);_=!0){var g=m.value;t.push(g)}}catch(e){v=!0,p=e}finally{try{!_&&y.return&&y.return()}finally{if(v)throw p}}}}}catch(e){i=!0,o=e}finally{try{!n&&c.return&&c.return()}finally{if(i)throw o}}t.length&&this._renderMask.DrawSmart(t,this._draw_color),r.forEach((function(t){e._data_map.delete(t)}))}}},{key:"attach",value:function(e){this._renderMask=e}}]),e}();t.DomeTrackResult=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.COLOR.BLUE,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return(0,f.default)(this,t),(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,r))}return(0,a.default)(t,e),(0,l.default)(t,[{key:"set",value:function(e){try{if(Array.isArray(e)){var t=!0,r=!1,i=void 0;try{for(var o,a=(0,s.default)(e);!(t=(o=a.next()).done);t=!0){var u=o.value;u.show_cnt=this._clear_delay,this._data_map.set(u.id,JSON.parse((0,n.default)(u)))}}catch(e){r=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw i}}}}catch(t){LOG.ERROR(t,e)}}},{key:"draw",value:function(e){if(this._renderMask){var t=[],r=[],n=!0,i=!1,o=void 0;try{for(var a,c=(0,s.default)(this._data_map);!(n=(a=c.next()).done);n=!0){var f=a.value,l=(0,u.default)(f,2),d=l[0],h=l[1];h.show_cnt--,h.show_cnt>=0?t.push(h):r.push(d)}}catch(e){i=!0,o=e}finally{try{!n&&c.return&&c.return()}finally{if(i)throw o}}var _=!0,v=!1,p=void 0;try{for(var m,y=(0,s.default)(r);!(_=(m=y.next()).done);_=!0){var g=m.value;this._data_map.delete(g)}}catch(e){v=!0,p=e}finally{try{!_&&y.return&&y.return()}finally{if(v)throw p}}t.length&&this._renderMask.DrawSmart(t,this._draw_color,e)}}}]),t}(_),t.FaceResult=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.COLOR.BLUE,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250;return(0,f.default)(this,t),(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,r))}return(0,a.default)(t,e),(0,l.default)(t,[{key:"set",value:function(e){try{if(Array.isArray(e)){var t=!0,r=!1,i=void 0;try{for(var o,a=(0,s.default)(e);!(t=(o=a.next()).done);t=!0){var u=o.value;u.show_cnt=this._clear_delay,this._data_map.set(u.id,JSON.parse((0,n.default)(u)))}}catch(e){r=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw i}}}}catch(t){LOG.ERROR(t,e)}}},{key:"draw",value:function(e){if(this._renderMask){var t=[],r=[],n=!0,i=!1,o=void 0;try{for(var a,c=(0,s.default)(this._data_map);!(n=(a=c.next()).done);n=!0){var f=a.value,l=(0,u.default)(f,2),d=l[0],h=l[1];h.show_cnt--,h.show_cnt>=0?t.push(h):r.push(d)}}catch(e){i=!0,o=e}finally{try{!n&&c.return&&c.return()}finally{if(i)throw o}}var _=!0,v=!1,p=void 0;try{for(var m,y=(0,s.default)(r);!(_=(m=y.next()).done);_=!0){var g=m.value;this._data_map.delete(g)}}catch(e){v=!0,p=e}finally{try{!_&&y.return&&y.return()}finally{if(v)throw p}}t.length&&this._renderMask.DrawSmart(t,this._draw_color,e)}}}]),t}(_)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(14)),i=u(r(58)),o=u(r(59)),a=u(r(2)),s=u(r(3));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var r={x:0,y:0,w:0,h:0},n=0,i=1,o=t;return n=e.getUint16(o,!0),o+=2,i=e.getUint16(o,!0),r.x=n/i,o+=2,n=e.getUint16(o,!0),o+=2,i=e.getUint16(o,!0),r.y=n/i,o+=2,n=e.getUint16(o,!0),o+=2,i=e.getUint16(o,!0),r.w=n/i,o+=2,n=e.getUint16(o,!0),o+=2,i=e.getUint16(o,!0),r.h=n/i,r}var f=function(){function e(){(0,a.default)(this,e),this.fn={1:["ivs_counter_rule","ivs_counter_result"],2:["ivs_wire_rule","ivs_wire_result"],3:["ivs_region_rule","ivs_region_result"],4:["ivs_region_rule","ivs_region_result"],7:["ivs_face_rule","ivs_face_result"],8:["","ivs_fire_result"],10:["","ivs_domeTrack_result"],12:["ivs_retrograde_rule","ivs_wire_result"],13:["ivs_highdensity_rule","ivs_wire_result"],14:["ivs_highdensity_rule","ivs_wire_result"],15:["ivs_wire_rule","ivs_wire_result"],18:["","ivs_person_result"],19:["ivs_highdensity_rule","ivs_absent_result"],20:["ivs_region_rule","ivs_region_result"],21:["ivs_helmet_rule","ivs_helmet_result"],22:["ivs_region_rule","ivs_region_result"],23:["","ivs_dometrack_resultV2"]}}var t,r;return(0,s.default)(e,[{key:"decode_data",value:function(e,t,r,n,i){if(this.fn[t]&&this.fn[t][e-27].length>0){var o=[1,12,19].includes(t)&&1==r||3==t&&2==r,a=this.fn[t][e-27];return this[a]?this[a](n,i,o):(console.error("decode_data/ has no function ===>",a),{})}return console.error("unsupported ","frametype is ",e,"type is ",t,"version is ",r),{}}},{key:"decode_node",value:function(e,t){var r=e.getUint32(t,!0);if(t+=4,320116008!=r)return null;var n=e.getUint32(t,!0);t+=4;var i=e.getUint32(t,!0);t+=4;var o=e.getUint32(t,!0);t+=4;var a=e.getUint32(t,!0);return t+=4,{magic:r,version:n,id:i,datalen:o,type:a}}},{key:"parse_arrow",value:function(e,t){var r={},n=t;r.mask=e.getUint32(n,!0),n+=4;var i=0;r.points=[];for(var o=[],a=void 0,s=void 0;i<10;)a=e.getUint32(n,!0),n+=4,s=e.getUint32(n,!0),r.points[i]={},r.points[i].x=a/s,n+=4,a=e.getUint32(n,!0),n+=4,s=e.getUint32(n,!0),r.points[i].y=a/s,n+=4,r.mask&1<<i&&i>0&&o.push([r.points[i<6?0:1],r.points[i]]),i++;return o}},{key:"ivs_counter_rule",value:function(e,t){var r=t+88,n=this.parse_arrow(e,r);r=t+252;var i=e.getUint32(r,!0);r+=4;var o=e.getUint32(r,!0);if(r=o,320116008!=e.getUint32(o,!0))return{};for(var a=[],s=void 0,u=void 0,c=0;c<i;c++)r+=4,s=e.getUint32(r,!0),r+=4,u=e.getUint32(r,!0),a[c]={},a[c].x=s/u,r+=4,s=e.getUint32(r,!0),r+=4,u=e.getUint32(r,!0),a[c].y=s/u;return{points:a,arrow:n}}},{key:"ivs_counter_result",value:function(e,t,r){var n=t+8,i=e.getInt32(n,!0);n+=4;var o=e.getInt32(n,!0);n+=4;var a=e.getInt32(n,!0);n+=4;var s=e.getInt32(n,!0);n+=4;var u=e.getInt32(n,!0);n+=4;var c=e.getInt32(n,!0);n+=4;var f=e.getUint32(n,!0),l={},d=void 0,h=void 0;return n+=4,d=e.getUint32(n,!0),n+=4,h=e.getUint32(n,!0),l.x=d/h,n+=4,d=e.getUint32(n,!0),n+=4,h=e.getUint32(n,!0),l.y=d/h,[{total_enable:i,real_rate_enable:o,total_count:a,real_count:s,total_alarm_num:u,rate_alarm_num:c,is_need_alarm:f,point:l,begin_end_lineto:!1}]}},{key:"ivs_wire_rule",value:function(e,t){var r=t+40,n=this.parse_arrow(e,r);r+=164;var i=e.getUint32(r,!0);r+=4;var o=e.getUint32(r,!0);if(r=o,320116008!=e.getUint32(o,!0))return{};var a=[],s=0,u=0,c=0;for(s=0;s<i;s++)r+=4,u=e.getUint32(r,!0),r+=4,c=e.getUint32(r,!0),a[s]={},a[s].x=u/c,r+=4,u=e.getUint32(r,!0),r+=4,c=e.getUint32(r,!0),a[s].y=u/c;return{begin_end_lineto:!1,points:a,arrow:n}}},{key:"ivs_retrograde_rule",value:function(e,t){var r=this.ivs_wire_rule(e,t);return r.begin_end_lineto=!0,r}},{key:"ivs_wire_result",value:function(e,t,r){var n=t+4,i=e.getUint32(n,!0);n+=4;var o=e.getUint32(n,!0);if(n=o,320116008!==e.getUint32(o,!0))return{};for(var a=[],s=void 0,u=void 0,c=0;c<i;c++){var f={rect:{}};n+=4,s=e.getUint32(n,!0),n+=4,u=e.getUint32(n,!0),f.rect.x=s/u,n+=4,s=e.getUint32(n,!0),n+=4,u=e.getUint32(n,!0),f.rect.y=s/u,n+=4,s=e.getUint32(n,!0),n+=4,u=e.getUint32(n,!0),f.rect.w=s/u,n+=4,s=e.getUint32(n,!0),n+=4,u=e.getUint32(n,!0),f.rect.h=s/u,a.push(f)}if(r){n=o+4+32*i;for(var l=0;l<i;l++)a[l].result_id=e.getUint32(n,!0),n+=4;n=o+4+32*i+4*i;for(var d=0;d<i;d++)a[d].result_type=e.getUint32(n,!0),n+=4}return a}},{key:"ivs_region_rule",value:function(e,t){var r=t+180,n=e.getUint32(r,!0);r+=4;var i=e.getUint32(r,!0);if(r=i,320116008!=e.getUint32(i,!0))return console.error("region rule vertex cnt",n),{};for(var o=[],a=void 0,s=void 0,u=0;u<n;u++)r+=4,a=e.getUint32(r,!0),r+=4,s=e.getUint32(r,!0),o[u]={},o[u].x=a/s,r+=4,a=e.getUint32(r,!0),r+=4,s=e.getUint32(r,!0),o[u].y=a/s;return n>0&&o.push(o[0]),{points:o,begin_end_lineto:!0}}},{key:"ivs_region_result",value:function(e,t,r){var n=t+8,i=e.getUint32(n,!0);n+=4;var o=e.getUint32(n,!0);if(n=o,320116008!=e.getUint32(o,!0))return console.error("region result vertex cnt",vertex_cnt),{};for(var a=[],s=void 0,u=void 0,c=0;c<i;c++){var f={rect:{}};n+=4,s=e.getUint32(n,!0),n+=4,u=e.getUint32(n,!0),f.rect.x=s/u,n+=4,s=e.getUint32(n,!0),n+=4,u=e.getUint32(n,!0),f.rect.y=s/u,n+=4,s=e.getUint32(n,!0),n+=4,u=e.getUint32(n,!0),f.rect.w=s/u,n+=4,s=e.getUint32(n,!0),n+=4,u=e.getUint32(n,!0),f.rect.h=s/u,a.push(f)}if(r){n=o+4+32*i;for(var l=0;l<i;l++)a[l].result_id=e.getUint32(n,!0),n+=4;n=o+4+32*i+4*i;for(var d=0;d<i;d++)a[d].result_type=e.getUint32(n,!0),n+=4}return a}},{key:"ivs_highdensity_rule",value:function(e,t){var r=t+8,n=e.getUint32(r,!0);r+=4;var i=e.getUint32(r,!0);if(r=i,320116008!=e.getUint32(i,!0))return{};for(var o=[],a=void 0,s=void 0,u=0;u<n;u++)r+=4,a=e.getUint32(r,!0),r+=4,s=e.getUint32(r,!0),o[u]={},o[u].x=a/s,r+=4,a=e.getUint32(r,!0),r+=4,s=e.getUint32(r,!0),o[u].y=a/s;return n>0&&o.push(o[0]),{points:o,begin_end_lineto:!1}}},{key:"ivs_helmet_rule",value:function(e,t){var r=t+24,n=e.getUint32(r,!0);r+=4;var i=e.getUint32(r,!0);if(r=i,320116008!=e.getUint32(i,!0))return console.error("helmet  rule vertex cnt",n),{};for(var o=[],a=void 0,s=void 0,u=0;u<n;u++)r+=4,a=e.getUint32(r,!0),r+=4,s=e.getUint32(r,!0),o[u]={},o[u].x=a/s,r+=4,a=e.getUint32(r,!0),r+=4,s=e.getUint32(r,!0),o[u].y=a/s;return n>0&&o.push(o[0]),{points:o,begin_end_lineto:!0}}},{key:"ivs_helmet_result",value:function(e,t){var r=t+4,n=e.getUint32(r,!0);r+=4;var i=e.getUint32(r,!0);if(r=i,320116008!=e.getUint32(i,!0))return{};var o=[],a=void 0,s=void 0;r+=4;for(var u=0;u<n;u++){var c=r+52*u;a=e.getUint16(c,!0),c+=2,s=e.getUint16(c,!0);var f={rect:{}};f.rect.x=a/s,c+=2,a=e.getUint16(c,!0),c+=2,s=e.getUint16(c,!0),f.rect.y=a/s,c+=2,a=e.getUint16(c,!0),c+=2,s=e.getUint16(c,!0),f.rect.w=a/s,c+=2,a=e.getUint16(c,!0),c+=2,s=e.getUint16(c,!0),f.rect.h=a/s,c+=18,f.helmet_status=e.getInt32(c,!0),o.push(f)}return o}},{key:"ivs_domeTrack_result",value:function(e,t){var r=t,n=void 0,i=void 0;n=e.getUint32(r,!0),r+=4,i=e.getUint32(r,!0);var o={rect:{}};return o.rect.x=n/i,r+=4,n=e.getUint32(r,!0),r+=4,i=e.getUint32(r,!0),o.rect.y=n/i,r+=4,n=e.getUint32(r,!0),r+=4,i=e.getUint32(r,!0),o.rect.w=n/i,r+=4,n=e.getUint32(r,!0),r+=4,i=e.getUint32(r,!0),o.rect.h=n/i,[]}},{key:"ivs_fire_result",value:function(e,t){var r=t,n=e.getUint32(r,!0);r+=4;var i=e.getUint32(r,!0);if(r=i,320116008!=e.getUint32(i,!0))return{};var o=[],a=void 0,s=void 0;r+=4;for(var u=0;u<n;u++)a=e.getUint16(r,!0),r+=2,s=e.getUint16(r,!0),o[u]={},o[u].x=a/s,r+=2,a=e.getUint16(r,!0),r+=2,s=e.getUint16(r,!0),o[u].y=a/s,r+=2,a=e.getUint16(r,!0),r+=2,s=e.getUint16(r,!0),o[u].w=a/s,r+=2,a=e.getUint16(r,!0),r+=2,s=e.getUint16(r,!0),o[u].h=a/s;return o.map((function(e,t){return{rect:e}}))}},{key:"ivs_person_result",value:function(e,t){var r=t-16,n=e.getUint32(r,!0);r=20;var i=e.getUint32(r,!0);switch(r=t,n){case 0:case 200:var o=e.getUint32(r,!0);r+=4;var a=e.getUint32(r,!0);if(a>i+36)return{};if(320116008!=e.getUint32(a,!0))return{};var s=[],u=void 0,c=void 0;r=a+4;for(var f=0;f<o;f++){var l=a+24*(f+1),d=e.getUint32(l,!0);if(-1!=d){l-=4;var h=e.getUint32(l,!0);u=e.getUint16(r,!0),r+=2,c=e.getUint16(r,!0);var _={};_.x=u/c,r+=2,u=e.getUint16(r,!0),r+=2,c=e.getUint16(r,!0),_.y=u/c,r+=2,u=e.getUint16(r,!0),r+=2,c=e.getUint16(r,!0),_.w=u/c,r+=2,u=e.getUint16(r,!0),r+=2,c=e.getUint16(r,!0),_.h=u/c,s.push({rect:_,id:d,score:h}),r=l+8}}return s}return{}}},{key:"ivs_absent_result",value:function(e,t){return{}}},{key:"ivs_face_rule",value:function(e,t){var r=t+12,n=e.getUint32(r,!0);if(r=n,320116008!=e.getUint32(n,!0))return{};r+=4;var i=void 0,o=void 0,a={};return i=e.getUint16(r,!0),r+=2,o=e.getUint16(r,!0),a.x=i/o,r+=2,i=e.getUint16(r,!0),r+=2,o=e.getUint16(r,!0),a.y=i/o,r+=2,i=e.getUint16(r,!0),r+=2,o=e.getUint16(r,!0),a.w=i/o,r+=2,i=e.getUint16(r,!0),r+=2,o=e.getUint16(r,!0),a.h=i/o,{begin_end_lineto:!0,points:[{x:a.x,y:a.y},{x:a.x+a.w,y:a.y},{x:a.x+a.w,y:a.y+a.h},{x:a.x,y:a.y+a.h}]}}},{key:"ivs_face_result",value:(r=(0,o.default)(i.default.mark((function e(t,r){var n,o,a,s,u,f,l,d,h,_,v,p,m,y,g,w,b,x,R,E,O,k,U,S,A,L,T,M,D,C,P,F,I,j,G,B,N,V,W,H,Y,q,z,X,J,K,Q,Z,ee,te,re,ne,ie,oe,ae,se,ue,ce,fe,le,de,he;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r-16,o=t.getUint32(n,!0),n=20,a=t.getUint32(n,!0),n=r,e.t0=o,e.next=0===e.t0||200===e.t0?8:202===e.t0?52:201===e.t0?64:175;break;case 8:if(s=t.getUint32(n,!0),n+=4,u=t.getUint32(n,!0),n+=4,t.getUint32(n,!0),n+=4,t.getUint32(n,!0),n+=4,f=t.getUint32(n,!0),n+=4,l=t.getUint32(n,!0),n+=4,d=t.getUint32(n,!0),!(u>a+36)){e.next=23;break}return e.abrupt("return",{});case 23:if(320116008==t.getUint32(u,!0)){e.next=26;break}return e.abrupt("return",{});case 26:if(!(f>0)){e.next=29;break}e.next=51;break;case 29:h=[],n=u+4,_=0;case 32:if(!(_<s)){e.next=50;break}if((v={}).rect=c(t,p=n+64*_),p+=56,m=t.getUint32(p,!0),p+=4,-1!=(y=t.getUint32(p,!0))){e.next=43;break}return console.error("id == -1"),e.abrupt("continue",47);case 43:v.id=y,v.score=m,d>0&&(p=l+8,g=t.getUint32(p,!0),p+=4,w=t.getUint32(p,!0),p+=4,b=t.getUint32(p,!0),1==g&&b>0&&(p=w+44*_,t.getInt32(p,!0),p+=4,t.getInt32(p,!0),p+=4,t.getInt32(p,!0),p+=4,p+=4,x=t.getUint32(p,!0),p+=4,R=t.getInt16(p,!0),p+=2,E=x>>31&1,O=x>>30&1,U=8191&(k=x>>16&65535),U*=k>>13&1?-1:1,S=32767&(k=65535&x),S*=k>>15&1?-1:1,v.temp_enable=E,v.is_alarm=O,v.temp=S/10,v.max_temp=U,v.facemask=R)),h.push(v);case 47:_++,e.next=32;break;case 50:return e.abrupt("return",h);case 51:return e.abrupt("break",177);case 52:if(n+=4,!((A=t.getUint32(n,!0))>a+36)){e.next=56;break}return e.abrupt("return",{});case 56:if(320116008==t.getUint32(A,!0)){e.next=59;break}return e.abrupt("return",{});case 59:return n+=8,t.getUint32(n,!0),n+=4,t.getUint32(n,!0),e.abrupt("break",177);case 64:if(L=t.getUint32(n,!0),n+=4,T=t.getUint32(n,!0),n+=4,M=t.getUint32(n,!0),n+=4,D=t.getUint32(n,!0),n+=4,C=t.getUint32(n,!0),n+=4,P=t.getUint32(n,!0),F=void 0,!(T>0)){e.next=81;break}return I=new DataView(t.buffer,L+4,T-4),e.next=80,this.get_data_base64(I);case 80:F=e.sent;case 81:if(j=void 0,!(D>0)){e.next=87;break}return G=new DataView(t.buffer,M+4,D-4),e.next=86,this.get_data_base64(G);case 86:j=e.sent;case 87:if(!(P>0)){e.next=174;break}n=C+4,B=[],N=0;case 91:if(!(N<64)){e.next=100;break}if(V=t.getUint8(n,!0),n++,N++,0!=V){e.next=97;break}return e.abrupt("continue",91);case 97:B.push(String.fromCharCode(V)),e.next=91;break;case 100:N=0,W=[];case 102:if(!(N<64)){e.next=111;break}if(H=t.getUint8(n,!0),n++,N++,0!=H){e.next=108;break}return e.abrupt("continue",102);case 108:W.push(H),e.next=102;break;case 111:return e.next=113,this.get_data_text(W);case 113:Y=e.sent,N=0,q=[];case 116:if(!(N<64)){e.next=125;break}if(z=t.getUint8(n,!0),n++,N++,0!=z){e.next=122;break}return e.abrupt("continue",116);case 122:q.push(z),e.next=116;break;case 125:return e.next=127,this.get_data_text(q);case 127:X=e.sent,N=0,J=[];case 130:if(!(N<64)){e.next=139;break}if(K=t.getUint8(n,!0),n++,N++,0!=K){e.next=136;break}return e.abrupt("continue",130);case 136:J.push(K),e.next=130;break;case 139:return e.next=141,this.get_data_text(J);case 141:return Q=e.sent,Z=t.getInt32(n,!0),n+=4,ee=t.getUint32(n,!0),n+=4,te=t.getUint8(n,!0),n+=1,re=t.getUint8(n,!0),n+=1,ne=t.getInt32(n,!0),n+=4,ie=t.getInt32(n,!0),n+=4,oe=t.getInt32(n,!0),n+=4,ae=t.getInt32(n,!0),n+=4,se=t.getInt32(n,!0),n+=4,n+=4,ue=t.getInt32(n,!0),n+=4,ce=t.getFloat32(n,!0),n+=4,fe=t.getInt32(n,!0),n+=4,le=t.getInt32(n,!0),n+=4,de=t.getFloat32(n,!0),n+=4,he={PictureBase64:F,IdentifyBase64:j,face_id:B.join(""),name:Y,describe:X,grp_name:Q,type:Z,similarity:ee,age:te,sex:re,wiegand_id:ne,detect_id:ie,detect_score:oe,capture_time:ae,compare_time:se},2==ue&&$.extend(he,{temp_enable:2==ue,temp:ce,temp_isalarm:fe,face_attr:le,temp_threshold:de}),e.abrupt("return",he);case 174:return e.abrupt("break",177);case 175:return console.error("unsupported node version",o),e.abrupt("break",177);case 177:return e.abrupt("return",{});case 178:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"get_data_text",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return new n.default((function(r,n){var i=new FileReader,o=new Uint8Array(e);i.readAsText(new Blob([o]),t),i.onload=function(){r(i.result)}}))}},{key:"get_data_base64",value:function(e){return new n.default((function(t,r){var n=new FileReader;n.readAsDataURL(new Blob([e],{type:"image/jpeg"})),n.onload=function(){t(n.result)}}))}},{key:"ivs_plate_result",value:(t=(0,o.default)(i.default.mark((function e(t,r){var n,o,a,s,u,c,f,l,d,h,_,v,p,m,y,g;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r,o=t.getUint32(n,!0),n+=4,a=t.getUint32(n,!0),n+=8,s=t.getUint32(n,!0),n+=4,u=t.getUint32(n,!0),n=a,320116008==t.getUint32(a,!0)){e.next=12;break}return e.abrupt("return",{});case 12:c=[],f=void 0,l=void 0,n+=4,d=0,h=[],d=0;case 19:if(!(d<o)){e.next=61;break}f=t.getUint16(n,!0),n+=2,l=t.getUint16(n,!0),c[d]={},c[d].x=f/l,n+=2,f=t.getUint16(n,!0),n+=2,l=t.getUint16(n,!0),c[d].y=f/l,n+=2,f=t.getUint16(n,!0),n+=2,l=t.getUint16(n,!0),c[d].w=f/l,n+=2,f=t.getUint16(n,!0),n+=2,l=t.getUint16(n,!0),c[d].h=f/l,n+=2,_=t.getUint32(n,!0),n+=12,d=0,v=[];case 45:if(!(d<12)){e.next=54;break}if(p=t.getUint8(n,!0),n+=1,d++,0!=p){e.next=51;break}return e.abrupt("continue",45);case 51:v.push(p),e.next=45;break;case 54:return e.next=56,this.get_data_text(v,"gbk");case 56:m=e.sent,h.push({rect:c,extData:{color:_,license:m}});case 58:d++,e.next=19;break;case 61:if(y=void 0,!(u>0)){e.next=68;break}return g=new DataView(t.buffer,s,u),e.next=66,this.get_data_base64(g);case 66:y=e.sent,h.push({rect:[],extData:{PlateCaptureBase64:y}});case 68:return e.abrupt("return",h);case 69:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})},{key:"ivs_dometrack_resultV2",value:function(e,t){var r=t+4,n=e.getUint32(r,!0);r+=4;var i=e.getUint32(r,!0);if(r=i,320116008!=e.getUint32(i,!0))return{};var o=[],a=void 0,s=void 0;r+=4;for(var u=0;u<n;u++){var c=r+60*u,f={rect:{},id:-1,is_tracked:-1,type:-1};f.id=e.getUint32(c,!0),c+=4,f.is_tracked=e.getUint32(c,!0),c+=4,a=e.getUint16(c,!0),c+=2,s=e.getUint16(c,!0),f.rect.x=a/s,c+=2,a=e.getUint16(c,!0),c+=2,s=e.getUint16(c,!0),f.rect.y=a/s,c+=2,a=e.getUint16(c,!0),c+=2,s=e.getUint16(c,!0),f.rect.w=a/s,c+=2,a=e.getUint16(c,!0),c+=2,s=e.getUint16(c,!0),f.rect.h=a/s,c+=2,f.type=e.getInt32(c,!0),o.push(f)}return o}}]),e}();t.default=f,e.exports=t.default},function(e,t,r){"use strict";var n=a(r(1)),i=r(7),o=a(r(210));function a(e){return e&&e.__esModule?e:{default:e}}n.default.install("loading",(function(){var e=this,t=this;(0,i.safe_setproperty)(this,"_loadingObj",null);var r=function(r){var n=r.show;if(!e._loadingObj){var a=(0,i.create_domnode_with_css)("canvas","loading-"+e.config.name,"\n                position: absolute;\n                top: 50%;\n                left: 50%;\n                margin-top: -50px;\n                margin-left: -50px;\n                width: 100px;\n                height: 100px;\n                z-index: 1000;\n             ");t.rootElement.children[0].appendChild(a),e._loadingObj=new o.default({dom:a,width:100,height:100,padding:50,strokeColor:"#aaa",pointDistance:.01,stepsPerFrame:3,trailLength:.7,step:"fader",setup:function(){this._.lineWidth=10},path:[["arc",50,50,50,0,360]]})}n?(e._loadingObj.canvas.style.display="block",e._loadingObj.play()):(e._loadingObj.stop(),e._loadingObj.canvas.style.display="none")};t.on("loading_tips",r);t.on("destroy",(function n(){t.off("loading_tips",r),e._loadingObj&&(e._loadingObj.stop(),e._loadingObj=null),t.off("destroy",n)}))}),["ws-loader"])},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=function(){};function t(t){this.converter=t.converter,this.data=t.path||t.data,this.imageData=[],this.multiplier=t.multiplier||1,this.padding=t.padding||0,this.fps=t.fps||25,this.stepsPerFrame=~~t.stepsPerFrame||1,this.trailLength=t.trailLength||1,this.pointDistance=t.pointDistance||.05,this.domClass=t.domClass||"sonic",this.dom=t.dom||null,this.backgroundColor=t.backgroundColor||"rgba(0,0,0,0)",this.fillColor=t.fillColor,this.strokeColor=t.strokeColor,this.stepMethod="string"==typeof t.step?o[t.step]:t.step||o.square,this._setup=t.setup||e,this._teardown=t.teardown||e,this._preStep=t.preStep||e,this.pixelRatio=t.pixelRatio||null,this.width=t.width,this.height=t.height,this.fullWidth=this.width+2*this.padding,this.fullHeight=this.height+2*this.padding,this.domClass=t.domClass||"sonic",this.setup(this.dom)}var r=t.argTypes={DIM:1,DEGREE:2,RADIUS:3,OTHER:0},n=t.argSignatures={arc:[1,1,3,2,2,0],bezier:[1,1,1,1,1,1,1,1],line:[1,1,1,1]},i=t.pathMethods={bezier:function(e,t,r,n,i,o,a,s,u){var c=1-(e=1-e),f=e*e,l=c*c,d=f*e,h=3*f*c,_=3*e*l,v=l*c;return[d*t+h*o+_*s+v*n,d*r+h*a+_*u+v*i]},arc:function(e,t,r,n,i,o){var a=(o-i)*e+i,s=[Math.cos(a)*n+t,Math.sin(a)*n+r];return s.angle=a,s.t=e,s},line:function(e,t,r,n,i){return[(n-t)*e+t,(i-r)*e+r]}},o=t.stepMethods={square:function(e,t,r,n,i){this._.fillRect(e.x-3,e.y-3,6,6)},fader:function(e,t,r,n,i){this._.beginPath(),this._last&&this._.moveTo(this._last.x,this._last.y),this._.lineTo(e.x,e.y),this._.closePath(),this._.stroke(),this._last=e}};return t.prototype={calculatePixelRatio:function(){return(window.devicePixelRatio||1)/(this._.webkitBackingStorePixelRatio||this._.mozBackingStorePixelRatio||this._.msBackingStorePixelRatio||this._.oBackingStorePixelRatio||this._.backingStorePixelRatio||1)},setup:function(){var e,t,o,a,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,u=this.data;this.canvas=s||document.createElement("canvas"),this._=this.canvas.getContext("2d"),null==this.pixelRatio&&(this.pixelRatio=this.calculatePixelRatio()),this.canvas.className=this.domClass,1!=this.pixelRatio?(this.canvas.style.height=this.fullHeight+"px",this.canvas.style.width=this.fullWidth+"px",this.fullHeight*=this.pixelRatio,this.fullWidth*=this.pixelRatio,this.canvas.height=this.fullHeight,this.canvas.width=this.fullWidth,this._.scale(this.pixelRatio,this.pixelRatio)):(this.canvas.height=this.fullHeight,this.canvas.width=this.fullWidth),this.points=[];for(var c=-1,f=u.length;++c<f;){if(e=u[c].slice(1),(o=u[c][0])in n)for(var l=-1,d=e.length;++l<d;){switch(t=n[o][l],a=e[l],t){case r.RADIUS:a*=this.multiplier;break;case r.DIM:a*=this.multiplier,a+=this.padding;break;case r.DEGREE:a*=Math.PI/180}e[l]=a}e.unshift(0);for(var h,_=this.pointDistance,v=_;v<=1;v+=_)v=Math.round(1*v/_)/(1/_),e[0]=v,h=i[o].apply(null,e),this.points.push({x:h[0],y:h[1],progress:v})}this.frame=0,this.converter&&this.converter.setup&&this.converter.setup(this)},prep:function(e){if(!(e in this.imageData)){this._.clearRect(0,0,this.fullWidth,this.fullHeight),this._.fillStyle=this.backgroundColor,this._.fillRect(0,0,this.fullWidth,this.fullHeight);var t,r,n,i,o=this.points,a=o.length;this.pointDistance;this._setup();for(var s=-1,u=a*this.trailLength;++s<u&&!this.stopped;)(t=o[r=e+s]||o[r-a])&&(this.alpha=Math.round(s/(u-1)*1e3)/1e3,this._.globalAlpha=this.alpha,this.fillColor&&(this._.fillStyle=this.fillColor),this.strokeColor&&(this._.strokeStyle=this.strokeColor),n=e/(this.points.length-1),i=s/(u-1),this._preStep(t,i,n),this.stepMethod(t,i,n));return this._teardown(),this.imageData[e]=this._.getImageData(0,0,this.fullWidth,this.fullWidth),!0}},draw:function(){this.prep(this.frame)||(this._.clearRect(0,0,this.fullWidth,this.fullWidth),this._.putImageData(this.imageData[this.frame],0,0)),this.converter&&this.converter.step&&this.converter.step(this),this.iterateFrame()||this.converter&&this.converter.teardown&&(this.converter.teardown(this),this.converter=null)},iterateFrame:function(){return this.frame+=this.stepsPerFrame,!(this.frame>=this.points.length)||(this.frame=0,!1)},play:function(){this.stopped||this.stop(),this.stopped=!1;var e=this;this.timer=setInterval((function(){e.draw()}),1e3/this.fps)},stop:function(){this.stopped=!0,this.timer&&clearInterval(this.timer)}},window.Sonic=t}(),e.exports=t.default},function(e,t,r){"use strict";var n=a(r(28)),i=a(r(1)),o=r(7);function a(e){return e&&e.__esModule?e:{default:e}}var s={IDLE:"STOP",PLAY:"PLAY",PAUSE:"PAUSE",FAST:"FAST",SLOW:"SLOW",FRAME:"FRAME"};i.default.install("vod",(function(){var e=this;i.default.LOG;if(e.config.vod){i.default.PlayerStatus=s,(0,o.safe_setproperty)(e,"speed",0),(0,o.safe_setproperty)(e,"status",s.IDLE);var t=function(t){e._ws.send((0,n.default)(t))},r=function(t){e.status=t,e.emit("player_status_msg",{status:e.status})};e.play=function(n){if(e.status==s.IDLE||e.status==s.PLAY||e.status==s.FAST||e.status==s.SLOW){if(!n)return void e.emit("invalid_cinfo");e.logParams.cinfo=n,e.emit("open_request",n),e.speed=0}else if(e.status==s.PAUSE)t({Type:1,Ch:0,Dev:0,Data:{Cmd:2}});else{if(e.status!=s.FRAME)return;t({Type:1,Ch:0,Dev:0,Data:{Cmd:0}})}r(s.PLAY)},e.stop=function(){var t;e.status!=s.IDLE&&(e.status==s.PAUSE||e.status,e.emit("abort_request"),r(s.IDLE),t=!1,e.volumne=t?1:0,e.emit("player_status_msg",{voice_status:t}))},e.pause=function(){e.status!=s.PLAY&&e.status!=s.FAST&&e.status!=s.SLOW||(t({Type:1,Ch:0,Dev:0,Data:{Cmd:2}}),r(s.PAUSE))},e.frame=function(){e.status!=s.PLAY&&e.status!=s.FAST&&e.status!=s.SLOW||(t({Type:1,Ch:0,Dev:0,Data:{Cmd:4}}),r(s.FRAME))},e.fast=function(){},e.slow=function(){};e.on("destroy",(function t(){e.off("destroy",t)}))}}),["ws-loader","base-decoder"])},function(e,t,r){"use strict";var n=i(r(14));function i(e){return e&&e.__esModule?e:{default:e}}i(r(1)).default.install("audio2wav",(function(){var e=this,t=this;t.transaudio2wav=function(t){var r=new Uint8Array(t);return e.FfmpegDecoder.worker.dispatch({type:"Audio2wav",content:r},[r.buffer]).then((function(e){return n.default.resolve(e.ab)}))};t.on("destroy",(function e(){t.off("destroy",e)}))}),["base-decoder"])},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(r(2)),i=c(r(3)),o=c(r(1)),a=c(r(214)),s=c(r(87)),u=c(r(65));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(){(0,n.default)(this,e),(0,u.default)(this),this.LOG=o.default.LOG,this.pcmframe_list=[]}return(0,i.default)(e,[{key:"destroy",value:function(){this.stop_record()}},{key:"_feed_pcm16_to_encode",value:function(){if(0==this.pcmframe_list.length);else{var e=this.pcmframe_list.shift(),t=s.default.g711_encode(new Uint16Array(e),s.default.G711_TYPE.TP_ULAW);t.byteLength>0&&this.emit("audiodata_record_encode_to_g711u",t)}}},{key:"_input_pcm16data",value:function(e){this.pcmframe_list.push(e),this._feed_pcm16_to_encode()}},{key:"stop",value:function(){this.$recorder&&(this.off("audiodata_record",this._input_pcm16data),this.$recorder.stop())}},{key:"start_record_push",value:function(){return this.$recorder||(this.$recorder=new a.default(this)),this.on("audiodata_record",this._input_pcm16data),this.$recorder.start(),!0}}]),e}();t.default=f,e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(r(58)),i=c(r(14)),o=c(r(59)),a=c(r(2)),s=c(r(3));r(215);var u=c(r(1));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(t){(0,a.default)(this,e),this.ob=t,this.LOG=u.default.LOG,this.debug=!1,this._recorder=null}var t,r;return(0,s.default)(e,[{key:"start",value:(r=(0,o.default)(n.default.mark((function e(){var t,r,o,a,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"wav",u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8e3,c=this,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._recorder){e.next=3;break}return this.LOG.ERROR("[voicetalk]","Audio Recorder is start already, ignore the start request!"),e.abrupt("return");case 3:return t=null,r=new ArrayBuffer(640),o=0,a=new DataView(r),this._recorder=Recorder({type:s,sampleRate:u,bufferSize:f,bitRate:l,onProcess:function(e,r,n,i,s,u){for(var f=Recorder.SampleData(e,i,8e3,t),l=t?t.index:0;l<f.index;l++)c._recorder.buffers[l]=null;for(var d=(t=f).data,h=0,_=d.length;h<_;){var v=d[h];o<640||(c.ob.emit("audiodata_record",a.buffer),a=new DataView(new ArrayBuffer(640)),o=0),a.setInt16(o,v,!0),h++,o+=2}}}),e.next=10,new i.default((function(e,t){c._recorder.open((function(){c._recorder.start()}),(function(e,t){c.LOG.ERROR("[voicetalk]",(t?"UserNotAllow，":"")+"无法录音:"+e)}))}));case 10:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"stop",value:(t=(0,o.default)(n.default.mark((function e(){var t=this;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new i.default((function(e,r){t._recorder.stop((function(e,r){if(t._recorder.close(),t._recorder=null,t.debug){t.LOG.DEBUG("[voicetalk]",((window.URL||webkitURL).createObjectURL(e),"时长:"+r+"ms"));var n=document.createElement("audio");n.controls=!0,document.body.appendChild(n),n.src=(window.URL||webkitURL).createObjectURL(e),n.play()}}),(function(e){t.LOG.ERROR("[voicetalk]","录音失败:"+e),t._recorder.close(),t._recorder=null}))}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();t.default=f,e.exports=t.default},function(e,t,r){var n;!function(e){"use strict";var t=function(){},r=function(e){return new o(e)};r.IsOpen=function(){var e=r.Stream;if(e){var t=(e.getTracks&&e.getTracks()||e.audioTracks||[])[0];if(t){var n=t.readyState;return"live"==n||n==t.LIVE}}return!1},r.BufferSize=4096,r.Destroy=function(){for(var e in console.log("Recorder Destroy"),n)n[e]()};var n={};r.BindDestroy=function(e,t){n[e]=t},r.Support=function(){var t=e.AudioContext;if(t||(t=e.webkitAudioContext),!t)return!1;var n=navigator.mediaDevices||{};return n.getUserMedia||(n=navigator).getUserMedia||(n.getUserMedia=n.webkitGetUserMedia||n.mozGetUserMedia||n.msGetUserMedia),!!n.getUserMedia&&(r.Scope=n,r.Ctx&&"closed"!=r.Ctx.state||(r.Ctx=new t,r.BindDestroy("Ctx",(function(){var e=r.Ctx;e&&e.close&&e.close()}))),!0)},r.SampleData=function(e,t,r,n,i){n||(n={});var o=n.index||0,a=n.offset||0,s=n.frameNext||[];i||(i={});var u=i.frameSize||1;i.frameType&&(u="mp3"==i.frameType?1152:1);for(var c=0,f=o;f<e.length;f++)c+=e[f].length;c=Math.max(0,c-Math.floor(a));var l=t/r;1<l?c=Math.floor(c/l):(l=1,r=t),c+=s.length;var d=new Int16Array(c),h=0;for(f=0;f<s.length;f++)d[h]=s[f],h++;for(var _=e.length;o<_;o++){for(var v=e[o],p=(f=a,v.length);f<p;){var m=Math.floor(f),y=Math.ceil(f),g=f-m;d[h]=v[m]+(v[y]-v[m])*g,h++,f+=l}a=f-p}s=null;var w=d.length%u;if(0<w){var b=2*(d.length-w);s=new Int16Array(d.buffer.slice(b)),d=new Int16Array(d.buffer.slice(0,b))}return{index:o,offset:a,frameNext:s,sampleRate:r,data:d}},r.PowerLevel=function(e,t){var r=e/t||0;return r<1251?Math.round(r/1250*10):Math.round(Math.min(100,Math.max(0,100*(1+Math.log(r/1e4)/Math.log(10)))))};var i=0;function o(e){this.id=++i,r.Traffic&&r.Traffic();var n={type:"mp3",bitRate:16,sampleRate:16e3,onProcess:t};for(var o in e)n[o]=e[o];this.set=n,this._S=9}r.Sync={O:9,C:9},r.prototype=o.prototype={open:function(n,i){var o=this;n=n||t,i=i||t;var a=function(){n(),o._SO=0},s=function(t,r){/Permission|Allow/i.test(t)?i("用户拒绝了录音权限",!0):!1===e.isSecureContext?i("无权录音(需https)"):/Found/i.test(t)?i(r+"，无可用麦克风"):i(r)},u=r.Sync,c=++u.O,f=u.C;o._O=o._O_=c,o._SO=o._S;var l=function(){if(f!=u.C||!o._O){var e="open被取消";return c==u.O?o.close():e="open被中断",i(e),!0}};if(r.IsOpen())a();else if(r.Support()){var d=function(e){(r.Stream=e)._call={},l()||setTimeout((function(){l()||(r.IsOpen()?(function(){var e=r.Ctx,t=r.Stream,n=t._m=e.createMediaStreamSource(t),i=t._p=(e.createScriptProcessor||e.createJavaScriptNode).call(e,r.BufferSize,1,1);n.connect(i),i.connect(e.destination);var o=t._call;i.onaudioprocess=function(e){for(var t in o){for(var r=e.inputBuffer.getChannelData(0),n=r.length,i=new Int16Array(n),a=0,s=0;s<n;s++){var u=Math.max(-1,Math.min(1,r[s]));u=u<0?32768*u:32767*u,i[s]=u,a+=Math.abs(u)}for(var c in o)o[c](i,a);return}}}(),a()):i("录音功能无效：无音频流"))}),100)},h=function(e){var t=e.name||e.message||e.code+":"+e;console.error(e),s(t,"无法录音："+t)},_=r.Scope.getUserMedia({audio:!0},d,h);_&&_.then&&_.then(d)[n&&"catch"](h)}else s("","此浏览器不支持录音")},close:function(e){e=e||t,this._stop();var n=r.Sync;if(this._O=0,this._O_!=n.O)return console.warn("close被忽略"),void e();n.C++;var i,o=r.Stream;if(o){(i=r.Stream)._m&&(i._m.disconnect(),i._p.disconnect(),i._p.onaudioprocess=i._p=i._m=null);for(var a=o.getTracks&&o.getTracks()||o.audioTracks||[],s=0;s<a.length;s++){var u=a[s];u.stop&&u.stop()}o.stop&&o.stop()}r.Stream=0,e()},mock:function(e,t){var r=this;return r._stop(),r.isMock=1,r.buffers=[e],r.recSize=e.length,r.srcSampleRate=t,r},envStart:function(e,t){var r=this,n=r.set;if(r.isMock=e?1:0,r.buffers=[],r.recSize=0,r.envInLast=0,r.envInFirst=0,r.envInFix=0,r.envInFixTs=[],n.sampleRate=Math.min(t,n.sampleRate),r.srcSampleRate=t,r.engineCtx=0,r[n.type+"_start"]){var i=r.engineCtx=r[n.type+"_start"](n);i&&(i.pcmDatas=[],i.pcmSize=0)}},envResume:function(){this.envInFixTs=[]},envIn:function(e,t){var n=this,i=n.set,o=n.engineCtx,a=n.srcSampleRate,s=e.length,u=r.PowerLevel(t,s),c=n.buffers,f=c.length;c.push(e);var l=Date.now(),d=Math.round(s/a*1e3);n.envInLast=l,1==n.buffers.length&&(n.envInFirst=l-d);var h=n.envInFixTs;h.splice(0,0,{t:l,d:d});for(var _=l,v=0,p=0;p<h.length;p++){var m=h[p];if(3e3<l-m.t){h.length=p;break}_=m.t,v+=m.d}var y=h[1],g=l-_;if(g/3<g-v&&(y&&1e3<g||6<=h.length)){var w=l-y.t-d;if(d/5<w){var b=!i.disableEnvInFix;if(console.warn("["+l+"]"+(b?"":"未")+"补偿"+w+"ms"),n.envInFix+=w,b){var x=new Int16Array(w*a/1e3);s+=x.length,c.push(x)}}}var R=n.recSize,E=s,O=R+E;if(n.recSize=O,o){var k=r.SampleData(c,a,i.sampleRate,o.chunkInfo);o.chunkInfo=k,O=(R=o.pcmSize)+(E=k.data.length),o.pcmSize=O,c=o.pcmDatas,f=c.length,c.push(k.data),a=k.sampleRate}var U=Math.round(O/a*1e3),S=c.length,A=function(){for(var e=L?0:-E,t=0,r=f;r<S;r++){var a=c[r];null==a?t=1:(e+=a.length,o&&a.length&&n[i.type+"_encode"](o,a))}t||(o?o.pcmSize+=e:n.recSize+=e)},L=i.onProcess(c,u,U,a,f,A);if(!0===L){var T=0;for(p=f;p<S;p++)null==c[p]?T=1:c[p]=new Int16Array(0);T?console.warn("异步模式下不能清除buffers"):o?o.pcmSize-=E:n.recSize-=E}else A()},start:function(){if(r.IsOpen()){console.log("["+Date.now()+"]Start");var e=this,t=(e.set,r.Ctx);if(e._stop(),e.state=0,e.envStart(0,t.sampleRate),e._SO&&e._SO+1!=e._S)console.warn("start被中断");else{e._SO=0;var n=function(){e.state=1,e.resume()};"suspended"==t.state?t.resume().then((function(){console.log("ctx resume"),n()})):n()}}else console.error("未open")},pause:function(){this.state&&(this.state=2,delete r.Stream._call[this.id])},resume:function(){var e=this;e.state&&(e.state=1,e.envResume(),r.Stream._call[e.id]=function(t,r){1==e.state&&e.envIn(t,r)})},_stop:function(e){var t=this,r=t.set;t.isMock||t._S++,t.state&&(t.pause(),t.state=0),!e&&t[r.type+"_stop"]&&(t[r.type+"_stop"](t.engineCtx),t.engineCtx=0)},stop:function(e,t,n){var i,o=this,a=o.set;console.log("["+Date.now()+"]Stop "+(o.envInLast?o.envInLast-o.envInFirst+"ms 补"+o.envInFix+"ms":"-"));var s=function(){o._stop(),n&&o.close()},u=function(e){t&&t(e),s()},c=function(t,r){console.log("["+Date.now()+"]结束 编码"+(Date.now()-i)+"ms 音频"+r+"ms/"+t.size+"b"),t.size<Math.max(100,r/2)?u("生成的"+a.type+"无效"):(e&&e(t,r),s())};if(!o.isMock){if(!o.state)return void u("未开始录音");o._stop(!0)}var f=o.recSize;if(f)if(o.buffers[0])if(o[a.type]){var l=o.engineCtx;if(o[a.type+"_complete"]&&l){l.pcmDatas;var d=Math.round(l.pcmSize/a.sampleRate*1e3);return i=Date.now(),void o[a.type+"_complete"](l,(function(e){c(e,d)}),u)}i=Date.now();var h=r.SampleData(o.buffers,o.srcSampleRate,a.sampleRate);a.sampleRate=h.sampleRate;var _=h.data;d=Math.round(_.length/a.sampleRate*1e3),console.log("采样"+f+"->"+_.length+" 花:"+(Date.now()-i)+"ms"),setTimeout((function(){i=Date.now(),o[a.type](_,(function(e){c(e,d)}),(function(e){u(e)}))}))}else u("未加载"+a.type+"编码器");else u("音频被释放");else u("未采集到录音")}},e.Recorder&&e.Recorder.Destroy(),(e.Recorder=r).LM="2020-1-8 10:53:14",r.TrafficImgUrl="//ia.51.la/go1?id=20469973&pvFlag=1",r.Traffic=function(){var e=r.TrafficImgUrl;if(e){var t=r.Traffic,n=location.href.replace(/#.*/,"");if(!t[n])t[n]=1,(new Image).src=e,console.log("Traffic Analysis Image: Recorder.TrafficImgUrl="+e)}}}(window),void 0!==(n=function(){return Recorder}.call(t,r,t,e))&&(e.exports=n),e.exports&&(e.exports=Recorder),function(){"use strict";Recorder.prototype.enc_wav={stable:!0,testmsg:"比特率取值范围8位、16位"},Recorder.prototype.wav=function(e,t,r){var n=this.set,i=e.length,o=n.sampleRate,a=8==n.bitRate?8:16,s=i*(a/8),u=new ArrayBuffer(44+s),c=new DataView(u),f=0,l=function(e){for(var t=0;t<e.length;t++,f++)c.setUint8(f,e.charCodeAt(t))},d=function(e){c.setUint16(f,e,!0),f+=2},h=function(e){c.setUint32(f,e,!0),f+=4};if(l("RIFF"),h(36+s),l("WAVE"),l("fmt "),h(16),d(1),d(1),h(o),h(o*(a/8)),d(a/8),d(a),l("data"),h(s),8==a)for(var _=0;_<i;_++,f++){var v=128+(e[_]>>8);c.setInt8(f,v,!0)}else for(_=0;_<i;_++,f+=2)c.setInt16(f,e[_],!0);t(new Blob([c.buffer],{type:"audio/wav"}))}}()}])}));
//# sourceMappingURL=h5player.js.map